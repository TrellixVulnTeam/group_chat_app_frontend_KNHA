{"code":"(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{122:function(e,t,a){\"use strict\";a.r(t);var n=a(0),r=a.n(n),s=a(76),c=a.n(s),o=(a(98),a(8)),i=a(86),l=a(34),j=a(59),u=a(123),d=a(115),b=a(79),m=a(80),O=a(30),p=a(2),g=Object(i.a)({uri:\"https://group-chat-app-div.herokuapp.com/graphql\"});g=Object(b.a)((function(e,t){var a=t.headers,n=localStorage.getItem(\"token\");return{headers:Object(o.a)(Object(o.a)({},a),{},{authorization:n?\"Bearer \".concat(n):\"\"})}})).concat(g);var x=new m.a({uri:\"wss://group-chat-app-div.herokuapp.com/subscriptions\",options:{reconnect:!0,connectionParams:{Authorization:\"Bearer \".concat(localStorage.getItem(\"token\"))}}}),h=Object(l.split)((function(e){var t=e.query,a=Object(O.e)(t);return\"OperationDefinition\"===a.kind&&\"subscription\"===a.operation}),x,g),f=new j.a({link:h,cache:new u.a,onError:function(e){var t=e.networkError,a=e.graphQLErrors;console.log(\"graphQLErrors\",a),console.log(\"networkError\",t)}});function v(e){return Object(p.jsx)(d.a,Object(o.a)({client:f},e))}var w=a(14),N=a(83),y=Object(n.createContext)(),S=Object(n.createContext)(),E=null,C=localStorage.getItem(\"token\");if(C){var G=Object(N.a)(C),k=new Date(1e3*G.exp);console.log(\"expiry \",k),new Date>k?localStorage.removeItem(\"token\"):E=G}else console.log(\"no token found\");var P,L,M,$,D,A=function(e,t){switch(t.type){case\"LOGIN\":return localStorage.setItem(\"token\",t.payload.token),Object(o.a)(Object(o.a)({},e),{},{user:t.payload});case\"LOGOUT\":return localStorage.removeItem(\"token\"),Object(o.a)(Object(o.a)({},e),{},{user:null});default:throw new Error(\"Unknown action type: \".concat(t.type))}},T=function(e){var t=e.children,a=Object(n.useReducer)(A,{user:E}),r=Object(w.a)(a,2),s=r[0],c=r[1];return Object(p.jsx)(S.Provider,{value:c,children:Object(p.jsx)(y.Provider,{value:s,children:t})})},I=function(){return Object(n.useContext)(y)},R=function(){return Object(n.useContext)(S)},_=a(52),U=Object(n.createContext)(),q=Object(n.createContext)(),Q=function(e,t){var a,n,r=t.payload,s=r.groupname,c=r.message,i=r.messages;switch(t.type){case\"SET_GROUPS\":return Object(o.a)(Object(o.a)({},e),{},{groups:t.payload});case\"SET_GROUP_MESSAGES\":return n=(a=Object(_.a)(e.groups)).findIndex((function(e){return e.groupname===s})),a[n]=Object(o.a)(Object(o.a)({},a[n]),{},{messages:i}),Object(o.a)(Object(o.a)({},e),{},{groups:a});case\"SET_SELECTED_GROUP\":return a=e.groups.map((function(e){return Object(o.a)(Object(o.a)({},e),{},{selected:e.groupname===t.payload})})),Object(o.a)(Object(o.a)({},e),{},{groups:a});case\"ADD_MESSAGE\":n=(a=Object(_.a)(e.groups)).findIndex((function(e){return e.groupname===s}));var l=Object(o.a)(Object(o.a)({},a[n]),{},{messages:a[n].messages?[c].concat(Object(_.a)(a[n].messages)):null});return a[n]=l,console.log(\"new group : \",l),Object(o.a)(Object(o.a)({},e),{},{groups:a})}},Y=function(e){var t=e.children,a=Object(n.useReducer)(Q,{groups:null}),r=Object(w.a)(a,2),s=r[0],c=r[1];return Object(p.jsx)(q.Provider,{value:c,children:Object(p.jsx)(U.Provider,{value:s,children:t})})},B=function(){return Object(n.useContext)(U)},z=function(){return Object(n.useContext)(q)},F=a(31),J=a(17),V=a(135),H=a(24),K=a(33),W=a(141),X=a(134),Z=a(84),ee=a(136),te=a(139),ae=Object(K.a)(P||(P=Object(H.a)([\"\\n  mutation register($username: String! $email: String! $password: String! $confirmPassword: String!){\\n    register(username: $username email: $email password: $password confirmPassword: $confirmPassword){\\n      username createdAt\\n    }\\n  }\\n\"]))),ne=function(e){var t,a,r,s,c=Object(n.useState)({username:\"\",email:\"\",password:\"\",confirmPassword:\"\"}),i=Object(w.a)(c,2),l=i[0],j=i[1],u=Object(n.useState)({}),d=Object(w.a)(u,2),b=d[0],m=d[1],O=Object(W.a)(ae,{update:function(t,a){return e.history.push(\"/login\")},onError:function(e){console.log(\"err: \",e.graphQLErrors[0].extensions.errors),m(e.graphQLErrors[0].extensions.errors)}}),g=Object(w.a)(O,2),x=g[0],h=g[1],f=h.loading;h.data,h.error;return Object(p.jsx)(X.a,{className:\"bg-white rounded-3 py-5 justify-content-center\",children:Object(p.jsxs)(Z.a,{sm:8,md:6,lg:4,children:[Object(p.jsx)(\"h1\",{className:\"text-center\",children:\"REGISTER\"}),Object(p.jsxs)(ee.a,{onSubmit:function(e){e.preventDefault(),console.log(\"variables: \",l),x({variables:l})},children:[Object(p.jsxs)(ee.a.Group,{className:\"mb-3\",children:[Object(p.jsx)(ee.a.Label,{className:b.email&&\"text-danger\",children:null!==(t=b.email)&&void 0!==t?t:\"Email address\"}),Object(p.jsx)(ee.a.Control,{type:\"email\",value:l.email,className:b.email&&\"is-invalid\",onChange:function(e){return j(Object(o.a)(Object(o.a)({},l),{},{email:e.target.value}))}})]}),Object(p.jsxs)(ee.a.Group,{className:\"mb-3\",children:[Object(p.jsx)(ee.a.Label,{className:b.username&&\"text-danger\",children:null!==(a=b.username)&&void 0!==a?a:\"Username\"}),Object(p.jsx)(ee.a.Control,{type:\"text\",value:l.username,className:b.username&&\"is-invalid\",onChange:function(e){return j(Object(o.a)(Object(o.a)({},l),{},{username:e.target.value}))}})]}),Object(p.jsxs)(ee.a.Group,{className:\"mb-3\",children:[Object(p.jsx)(ee.a.Label,{className:b.password&&\"text-danger\",children:null!==(r=b.password)&&void 0!==r?r:\"Password\"}),Object(p.jsx)(ee.a.Control,{type:\"password\",value:l.password,className:b.password&&\"is-invalid\",onChange:function(e){return j(Object(o.a)(Object(o.a)({},l),{},{password:e.target.value}))}})]}),Object(p.jsxs)(ee.a.Group,{className:\"mb-3\",children:[Object(p.jsx)(ee.a.Label,{className:b.confirmPassword&&\"text-danger\",children:null!==(s=b.confirmPassword)&&void 0!==s?s:\"Confirm Password\"}),Object(p.jsx)(ee.a.Control,{type:\"password\",value:l.confirmPassword,className:b.confirmPassword&&\"is-invalid\",onChange:function(e){return j(Object(o.a)(Object(o.a)({},l),{},{confirmPassword:e.target.value}))}})]}),Object(p.jsxs)(\"div\",{className:\"text-center\",children:[Object(p.jsx)(te.a,{variant:\"success\",type:\"submit\",disabled:f,children:f?\"loading..\":\"Register\"}),Object(p.jsx)(\"br\",{}),Object(p.jsxs)(\"small\",{children:[\"Already have an account ? \",Object(p.jsx)(F.b,{to:\"/login\",children:\"Login\"})]})]})]})]})})},re=a(138),se=Object(K.a)(L||(L=Object(H.a)([\"\\n  query login($username: String! $password: String!) {\\n    login(username: $username password: $password) {\\n      username\\n      token\\n      createdAt\\n    }\\n  }\\n\"]))),ce=function(){var e,t,a=Object(n.useState)({username:\"\",password:\"\"}),r=Object(w.a)(a,2),s=r[0],c=r[1],i=Object(n.useState)({}),l=Object(w.a)(i,2),j=l[0],u=l[1],d=R(),b=Object(re.a)(se,{onError:function(e){return u(e.graphQLErrors[0].extensions.errors)},onCompleted:function(e){d({type:\"LOGIN\",payload:e.login}),window.location.href=\"/\"}}),m=Object(w.a)(b,2),O=m[0],g=m[1],x=g.loading;g.data,g.error;return Object(p.jsx)(X.a,{className:\"bg-white rounded-3 py-5 justify-content-center\",children:Object(p.jsxs)(Z.a,{sm:8,md:6,lg:4,children:[Object(p.jsx)(\"h1\",{className:\"text-center\",children:\"Login\"}),Object(p.jsxs)(ee.a,{onSubmit:function(e){e.preventDefault(),console.log(\"Variables: \",s),O({variables:s})},children:[Object(p.jsxs)(ee.a.Group,{className:\"mb-3\",children:[Object(p.jsx)(ee.a.Label,{className:j.username&&\"text-danger\",children:null!==(e=j.username)&&void 0!==e?e:\"Username\"}),Object(p.jsx)(ee.a.Control,{type:\"text\",placeholder:\"Enter user name\",value:s.username,className:j.username&&\"is-invalid\",onChange:function(e){return c(Object(o.a)(Object(o.a)({},s),{},{username:e.target.value}))}})]}),Object(p.jsxs)(ee.a.Group,{className:\"mb-3\",children:[Object(p.jsx)(ee.a.Label,{className:j.password&&\"text-danger\",children:null!==(t=j.password)&&void 0!==t?t:\"Password\"}),Object(p.jsx)(ee.a.Control,{type:\"password\",placeholder:\"Enter password\",value:s.password,className:j.password&&\"is-invalid\",onChange:function(e){return c(Object(o.a)(Object(o.a)({},s),{},{password:e.target.value}))}})]}),Object(p.jsxs)(\"div\",{className:\"text-center\",children:[Object(p.jsx)(te.a,{variant:\"success\",type:\"submit\",disabled:x,children:x?\"loading..\":\"Login\"}),Object(p.jsx)(\"br\",{}),Object(p.jsxs)(\"small\",{children:[\"Don't have an account ? \",Object(p.jsx)(F.b,{to:\"/register\",children:\"Register here\"})]})]})]})]})})},oe=a(137),ie=a(6),le=a.n(ie),je=a(49),ue=a.n(je),de=a(142);function be(e){var t=e.message,a=I().user,n=t.from===a.username,r=!n;return Object(p.jsxs)(\"div\",{className:le()(\"d-flex flex-column my-1\",{\"ms-auto\":n,\"me-auto\":r}),children:[Object(p.jsx)(\"div\",{className:le()(\"position-relative pt-3 px-3 rounded-pill\",{\"bg-primary text-end\":n,\"bg-light text-start\":r}),children:Object(p.jsx)(\"p\",{className:le()({\"text-white\":n}),children:t.content},t.id)}),Object(p.jsx)(\"div\",{className:le()(\"text-end\",{\"text-end\":n,\"text-start\":r}),children:Object(p.jsxs)(\"p\",{children:[t.from,\": \",ue()(t.createdAt).format(\"DD MMM @ h:mm a\")]})})]})}var me,Oe,pe=Object(K.a)(M||(M=Object(H.a)([\"\\n  query getMessages($to: String!){\\n    getMessages(to: $to){\\n      content from to createdAt\\n    }\\n  }\\n\"]))),ge=Object(K.a)($||($=Object(H.a)([\"\\n  mutation sendMessage($to: String! $content: String!){\\n    sendMessage(to: $to content: $content){\\n      id content from to createdAt\\n    }\\n  }\\n\"]))),xe=Object(K.a)(D||(D=Object(H.a)([\"\\n  subscription newMessage {\\n    newMessage{\\n      id from content to createdAt\\n    }\\n  }\\n\"]))),he=function(){var e=B().groups,t=z(),a=Object(n.useState)(\"\"),r=Object(w.a)(a,2),s=r[0],c=r[1],o=null===e||void 0===e?void 0:e.find((function(e){return!0===e.selected})),i=null===o||void 0===o?void 0:o.messages,l=Object(de.a)(xe),j=l.data,u=l.error,d=Object(re.a)(pe),b=Object(w.a)(d,2),m=b[0],O=b[1],g=O.loading,x=O.data,h=Object(W.a)(ge,{onError:function(e){return console.log(e)}}),f=Object(w.a)(h,1)[0];Object(n.useEffect)((function(){if(u&&console.log(u),j){var e=j.newMessage;t({type:\"ADD_MESSAGE\",payload:{groupname:e.to,message:e}})}}),[u,j]),Object(n.useEffect)((function(){o&&!o.messages&&m({variables:{to:o.groupname}})}),[o]),Object(n.useEffect)((function(){x&&(console.log(\"messages Data : \",x),t({type:\"SET_GROUP_MESSAGES\",payload:{groupname:o.groupname,messages:x.getMessages}}))}),[x]);var v,N=function(e){e.preventDefault(),\"\"!==s.trim()&&o&&(console.log(\"send message: \",s),c(\"\"),f({variables:{to:o.groupname,content:s}}))};i||g?g?v=Object(p.jsx)(\"p\",{className:\"info-text\",children:\"loading...\"}):i.length>0?v=i.map((function(e,t){return Object(p.jsxs)(n.Fragment,{children:[Object(p.jsx)(be,{message:e}),t===i.length-1&&Object(p.jsx)(\"div\",{className:\"invisible\",children:Object(p.jsx)(\"hr\",{className:\"m-0\"})})]},e.id)})):0===i.length&&(v=Object(p.jsx)(\"p\",{className:\"info-text\",children:\"You are now connected! send your first message\"})):v=Object(p.jsx)(\"p\",{className:\"info-text\",children:\"Select a friend\"});return Object(p.jsxs)(Z.a,{xs:10,md:8,className:\"chat-box p-2\",children:[Object(p.jsx)(\"div\",{className:\"d-flex justify-content-end m-3\",children:Object(p.jsx)(te.a,{variant:\"outline-danger\",className:\"leave-room\",onClick:function(){window.location.href=\"/\"},children:\"Leave Room\"})}),Object(p.jsx)(\"div\",{className:\"messages-box d-flex flex-column-reverse my-3 p-3\",children:v}),Object(p.jsx)(\"div\",{className:\"px-3 py-2 mb-3 mt-2\",children:Object(p.jsx)(ee.a,{onSubmit:N,children:Object(p.jsxs)(ee.a.Group,{className:\"d-flex align-items-center m-0\",children:[Object(p.jsx)(ee.a.Control,{type:\"text\",className:\"message-input rounded-pill p-3 border-0\",placeholder:\"Type a message...\",value:s,onChange:function(e){return c(e.target.value)}}),Object(p.jsx)(\"i\",{className:\"fas fa-paper-plane fa-2x text-primary ms-2\",role:\"button\",onClick:N})]})})})]})},fe=Object(K.a)(me||(me=Object(H.a)([\"\\n  query getGroupCount{\\n    getGroupCount\\n  }\\n\"]))),ve=Object(K.a)(Oe||(Oe=Object(H.a)([\"\\n  mutation getGroups($page: Int!){\\n    getGroups(page: $page){\\n      groupname groupdesc createdAt\\n    }\\n  }\\n\"]))),we=function(){var e,t,a=R(),r=z(),s=B().groups,c=null===s||void 0===s||null===(e=s.find((function(e){return!0===e.selected})))||void 0===e?void 0:e.groupname,o=Object(n.useState)(!1),i=Object(w.a)(o,2),l=i[0],j=i[1],u=Object(n.useState)(1),d=Object(w.a)(u,2),b=d[0],m=d[1],O=Object(n.useState)(0),g=Object(w.a)(O,2),x=g[0],h=g[1],f=[],v=Object(re.a)(fe,{onError:function(e){return console.log(\"errrrrr\",e)},onCompleted:function(e){console.log(\"count: \",e),h(e.getGroupCount)}}),N=Object(w.a)(v,1)[0],y=Object(W.a)(ve,{onError:function(e){return console.log(e)},onCompleted:function(e){return r({type:\"SET_GROUPS\",payload:e.getGroups})}}),S=Object(w.a)(y,2),E=S[0],C=S[1].loading;if(x>0)for(var G=1;G<=Math.ceil(x/3);G++)f.push(G);Object(n.useEffect)((function(){N(),console.log(\"total groups: \",x),E({variables:{page:b}})}),[b,x,N,E]),!s||C?t=Object(p.jsx)(\"p\",{children:\"loading..\"}):0===s.length?t=Object(p.jsx)(\"p\",{children:\"no groups created yet\"}):s.length>0&&(t=s.map((function(e){var t=c===e.groupname;return Object(p.jsx)(Z.a,{sm:12,md:6,lg:4,className:\"my-2 mx-auto\",children:Object(p.jsxs)(oe.a,{className:\"text-center pt-1\",children:[Object(p.jsxs)(oe.a.Body,{children:[Object(p.jsx)(oe.a.Title,{className:\"text-uppercase\",children:e.groupname}),Object(p.jsx)(oe.a.Text,{className:\"text-capitalize\",children:e.groupdesc}),Object(p.jsx)(te.a,{variant:\"primary\",className:le()(\"mb-3\",{\"btn-warning\":t}),onClick:function(){r({type:\"SET_SELECTED_GROUP\",payload:e.groupname}),j(!0)},children:\"Enter group\"})]}),Object(p.jsxs)(oe.a.Footer,{className:\"text-muted\",children:[\"Created: \",ue()(e.createdAt).format(\"MMM DD, YYYY @ h:mm a\")]})]})},e.groupname)})));return Object(p.jsxs)(n.Fragment,{children:[Object(p.jsx)(X.a,{className:\"justify-content-end mx-auto mb-3\",children:Object(p.jsx)(Z.a,{className:\"text-end\",children:Object(p.jsx)(te.a,{variant:\"link\",className:\"btn-light text-decoration-none\",onClick:function(){a({type:\"LOGOUT\"}),window.location.href=\"/login\"},children:\"Logout\"})})}),Object(p.jsx)(X.a,{children:!1===l?t:Object(p.jsx)(he,{})}),Object(p.jsx)(\"nav\",{children:!1===l?Object(p.jsx)(\"ul\",{className:\"pagination justify-content-end\",children:f.map((function(e){return Object(p.jsx)(\"li\",{className:\"page-item\",children:Object(p.jsx)(te.a,{variant:\"link\",className:\"page-link\",onClick:function(){return t=e,console.log(\"selected page number: \",t),void m(t);var t},children:e})},e)}))}):\"\"})]})};function Ne(e){var t=I().user;return e.authenticated&&!t?Object(p.jsx)(J.a,{to:\"/login\"}):e.guest&&t?Object(p.jsx)(J.a,{to:\"/\"}):Object(p.jsx)(J.b,Object(o.a)({component:e.component},e))}var ye=function(){return Object(p.jsx)(v,{children:Object(p.jsx)(T,{children:Object(p.jsx)(Y,{children:Object(p.jsx)(F.a,{children:Object(p.jsx)(V.a,{className:\"pt-5\",children:Object(p.jsxs)(J.d,{children:[Object(p.jsx)(Ne,{exact:!0,path:\"/\",component:we,authenticated:!0}),Object(p.jsx)(Ne,{path:\"/chat\",component:he,authenticated:!0}),Object(p.jsx)(Ne,{path:\"/register\",component:ne,guest:!0}),Object(p.jsx)(Ne,{path:\"/login\",component:ce,guest:!0})]})})})})})})};c.a.render(Object(p.jsx)(r.a.StrictMode,{children:Object(p.jsx)(ye,{})}),document.getElementById(\"root\"))},98:function(e,t,a){}},[[122,1,2]]]);","name":"static/js/main.3dd30fdb.chunk.js","map":{"version":3,"sources":["static/js/main.3dd30fdb.chunk.js"],"names":["this","push","122","module","__webpack_exports__","__webpack_require__","r","react","react_default","n","react_dom","react_dom_default","objectSpread2","createHttpLink","client","ApolloClient","inMemoryCache","ApolloProvider","context","ws","getFromAST","jsx_runtime","httpLink","Object","uri","_","_ref","headers","token","localStorage","getItem","authorization","concat","wsLink","options","reconnect","connectionParams","Authorization","splitLink","_ref2","query","definition","kind","operation","ApolloProvider_client","link","cache","onError","_ref3","networkError","graphQLErrors","console","log","ApolloProvider_ApolloProvider","props","slicedToArray","jwt_decode_esm","AuthStateContext","AuthDispatchContext","auth_user","auth_token","decodedToken","expiresAt","Date","exp","removeItem","_templateObject","Login_templateObject","Chatroom_templateObject","_templateObject2","_templateObject3","auth_authReducer","state","action","type","setItem","payload","user","Error","auth_AuthProvider","children","_useReducer","_useReducer2","dispatch","Provider","value","auth_useAuthState","auth_useAuthDispatch","toConsumableArray","MessageStateContext","MessageDispatchContext","message_messageReducer","groupsCopy","groupIndex","_action$payload","groupname","message","messages","groups","findIndex","group","map","selected","newGroup","message_MessageProvider","message_useMessageState","message_useMessageDispatch","react_router_dom","react_router","Container","taggedTemplateLiteral","lib","useMutation","Row","Col","Form","Button","REGISTER_USER","Register_Register","_errors$email","_errors$username","_errors$password","_errors$confirmPasswo","_useState","username","email","password","confirmPassword","_useState2","variables","setVariables","_useState3","_useState4","errors","setErrors","_useMutation","update","res","history","err","extensions","_useMutation2","registerUser","_useMutation2$","loading","data","error","className","sm","md","lg","onSubmit","event","preventDefault","Group","Label","Control","onChange","e","target","variant","disabled","to","useLazyQuery","LOGIN_USER","Login_Login","authDispatch","_useLazyQuery","onCompleted","login","window","location","href","_useLazyQuery2","loginUser","_useLazyQuery2$","placeholder","Card","classnames","classnames_default","moment","moment_default","useSubscription","Message","sent","from","received","ms-auto","me-auto","bg-primary text-end","bg-light text-start","text-white","content","id","text-end","text-start","createdAt","format","Home_templateObject","Home_templateObject2","GET_MESSAGES","SEND_MESSAGE","NEW_MESSAGE","Chatroom_Chatroom","setContent","selectedGroup","find","_useSubscription","messageData","messageError","getMessages","messagesLoading","messagesData","sendMessage","newMessage","selectedChatMarkup","submitMessage","trim","length","index","xs","onClick","role","GET_GROUP_COUNT","GET_GROUPS","Home_Home","_groups$find","groupsMarkup","clicked","setClicked","currentPage","setCurrentPage","_useState5","_useState6","totalGroups","setTotalGroups","pageNumbers","getGroupCount","getGroups","i","Math","ceil","page","Body","Title","Text","groupdesc","btn-warning","Footer","pageNumber","AuthRouteComponent","authenticated","guest","component","src_App","exact","path","a","render","StrictMode","document","getElementById","98","exports"],"mappings":"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"},"input":"(this[\"webpackJsonpclient\"] = this[\"webpackJsonpclient\"] || []).push([[0],{\n\n/***/ 122:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(0);\nvar react_default = /*#__PURE__*/__webpack_require__.n(react);\n\n// EXTERNAL MODULE: ./node_modules/react-dom/index.js\nvar react_dom = __webpack_require__(76);\nvar react_dom_default = /*#__PURE__*/__webpack_require__.n(react_dom);\n\n// EXTERNAL MODULE: ./src/App.scss\nvar App = __webpack_require__(98);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js + 1 modules\nvar objectSpread2 = __webpack_require__(8);\n\n// EXTERNAL MODULE: ./node_modules/@apollo/client/link/http/createHttpLink.js + 7 modules\nvar createHttpLink = __webpack_require__(86);\n\n// EXTERNAL MODULE: ./node_modules/@apollo/client/index.js\nvar client = __webpack_require__(34);\n\n// EXTERNAL MODULE: ./node_modules/@apollo/client/core/ApolloClient.js + 8 modules\nvar ApolloClient = __webpack_require__(59);\n\n// EXTERNAL MODULE: ./node_modules/@apollo/client/cache/inmemory/inMemoryCache.js + 4 modules\nvar inMemoryCache = __webpack_require__(123);\n\n// EXTERNAL MODULE: ./node_modules/@apollo/client/react/context/ApolloProvider.js\nvar ApolloProvider = __webpack_require__(115);\n\n// EXTERNAL MODULE: ./node_modules/@apollo/client/link/context/index.js\nvar context = __webpack_require__(79);\n\n// EXTERNAL MODULE: ./node_modules/@apollo/client/link/ws/index.js\nvar ws = __webpack_require__(80);\n\n// EXTERNAL MODULE: ./node_modules/@apollo/client/utilities/graphql/getFromAST.js\nvar getFromAST = __webpack_require__(30);\n\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(2);\n\n// CONCATENATED MODULE: ./src/ApolloProvider.js\nvar httpLink=Object(createHttpLink[\"a\" /* createHttpLink */])({uri:'https://group-chat-app-div.herokuapp.com/graphql'});// the setContext will set the header for all request\n// if token changes, it sets new token\nvar authLink=Object(context[\"a\" /* setContext */])(function(_,_ref){var headers=_ref.headers;// get the authentication token from local storage if it exists\nvar token=localStorage.getItem('token');// return the headers to the context so httpLink can read them\nreturn{headers:Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},headers),{},{authorization:token?\"Bearer \".concat(token):\"\"})};});httpLink=authLink.concat(httpLink);var wsLink=new ws[\"a\" /* WebSocketLink */]({uri:'wss://group-chat-app-div.herokuapp.com/subscriptions',options:{reconnect:true,connectionParams:{Authorization:\"Bearer \".concat(localStorage.getItem('token'))}}});var splitLink=Object(client[\"split\"])(function(_ref2){var query=_ref2.query;var definition=Object(getFromAST[\"e\" /* getMainDefinition */])(query);return definition.kind==='OperationDefinition'&&definition.operation==='subscription';},wsLink,httpLink);var ApolloProvider_client=new ApolloClient[\"a\" /* ApolloClient */]({link:splitLink,cache:new inMemoryCache[\"a\" /* InMemoryCache */](),onError:function onError(_ref3){var networkError=_ref3.networkError,graphQLErrors=_ref3.graphQLErrors;console.log('graphQLErrors',graphQLErrors);console.log('networkError',networkError);}});function ApolloProvider_ApolloProvider(props){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ApolloProvider[\"a\" /* ApolloProvider */],Object(objectSpread2[\"a\" /* default */])({client:ApolloProvider_client},props));}\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 3 modules\nvar slicedToArray = __webpack_require__(14);\n\n// EXTERNAL MODULE: ./node_modules/jwt-decode/build/jwt-decode.esm.js\nvar jwt_decode_esm = __webpack_require__(83);\n\n// CONCATENATED MODULE: ./src/context/auth.js\nvar AuthStateContext=/*#__PURE__*/Object(react[\"createContext\"])();var AuthDispatchContext=/*#__PURE__*/Object(react[\"createContext\"])();var auth_user=null;var auth_token=localStorage.getItem('token');if(auth_token){var decodedToken=Object(jwt_decode_esm[\"a\" /* default */])(auth_token);// since we have expiry value 'exp' in the token payload, we need to check is login is expired\nvar expiresAt=new Date(decodedToken.exp*1000);console.log('expiry ',expiresAt);if(new Date()>expiresAt){localStorage.removeItem('token');}else{auth_user=decodedToken;}}else{console.log('no token found');}var auth_authReducer=function authReducer(state,action){switch(action.type){case'LOGIN':localStorage.setItem('token',action.payload.token);return Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},state),{},{user:action.payload});case'LOGOUT':localStorage.removeItem('token');return Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},state),{},{user:null});default:throw new Error(\"Unknown action type: \".concat(action.type));}};var auth_AuthProvider=function AuthProvider(_ref){var children=_ref.children;var _useReducer=Object(react[\"useReducer\"])(auth_authReducer,{user:auth_user}),_useReducer2=Object(slicedToArray[\"a\" /* default */])(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AuthDispatchContext.Provider,{value:dispatch,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AuthStateContext.Provider,{value:state,children:children})});};var auth_useAuthState=function useAuthState(){return Object(react[\"useContext\"])(AuthStateContext);};var auth_useAuthDispatch=function useAuthDispatch(){return Object(react[\"useContext\"])(AuthDispatchContext);};\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js + 3 modules\nvar toConsumableArray = __webpack_require__(52);\n\n// CONCATENATED MODULE: ./src/context/message.js\nvar MessageStateContext=/*#__PURE__*/Object(react[\"createContext\"])();var MessageDispatchContext=/*#__PURE__*/Object(react[\"createContext\"])();var message_messageReducer=function messageReducer(state,action){var groupsCopy,groupIndex;var _action$payload=action.payload,groupname=_action$payload.groupname,message=_action$payload.message,messages=_action$payload.messages;switch(action.type){case'SET_GROUPS':return Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},state),{},{groups:action.payload});case'SET_GROUP_MESSAGES':groupsCopy=Object(toConsumableArray[\"a\" /* default */])(state.groups);groupIndex=groupsCopy.findIndex(function(group){return group.groupname===groupname;});groupsCopy[groupIndex]=Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},groupsCopy[groupIndex]),{},{messages:messages});return Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},state),{},{groups:groupsCopy});case'SET_SELECTED_GROUP':groupsCopy=state.groups.map(function(group){return Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},group),{},{selected:group.groupname===action.payload});});return Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},state),{},{groups:groupsCopy});case'ADD_MESSAGE':groupsCopy=Object(toConsumableArray[\"a\" /* default */])(state.groups);groupIndex=groupsCopy.findIndex(function(group){return group.groupname===groupname;});var newGroup=Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},groupsCopy[groupIndex]),{},{messages:groupsCopy[groupIndex].messages?[message].concat(Object(toConsumableArray[\"a\" /* default */])(groupsCopy[groupIndex].messages)):null});groupsCopy[groupIndex]=newGroup;console.log('new group : ',newGroup);return Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},state),{},{groups:groupsCopy});}};var message_MessageProvider=function MessageProvider(_ref){var children=_ref.children;var _useReducer=Object(react[\"useReducer\"])(message_messageReducer,{groups:null}),_useReducer2=Object(slicedToArray[\"a\" /* default */])(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(MessageDispatchContext.Provider,{value:dispatch,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(MessageStateContext.Provider,{value:state,children:children})});};var message_useMessageState=function useMessageState(){return Object(react[\"useContext\"])(MessageStateContext);};var message_useMessageDispatch=function useMessageDispatch(){return Object(react[\"useContext\"])(MessageDispatchContext);};\n// EXTERNAL MODULE: ./node_modules/react-router-dom/esm/react-router-dom.js\nvar react_router_dom = __webpack_require__(31);\n\n// EXTERNAL MODULE: ./node_modules/react-router/esm/react-router.js\nvar react_router = __webpack_require__(17);\n\n// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/Container.js\nvar Container = __webpack_require__(135);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\nvar taggedTemplateLiteral = __webpack_require__(24);\n\n// EXTERNAL MODULE: ./node_modules/graphql-tag/lib/index.js + 14 modules\nvar lib = __webpack_require__(33);\n\n// EXTERNAL MODULE: ./node_modules/@apollo/client/react/hooks/useMutation.js + 1 modules\nvar useMutation = __webpack_require__(141);\n\n// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/Row.js\nvar Row = __webpack_require__(134);\n\n// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/Col.js\nvar Col = __webpack_require__(84);\n\n// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/Form.js + 13 modules\nvar Form = __webpack_require__(136);\n\n// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/Button.js + 2 modules\nvar Button = __webpack_require__(139);\n\n// CONCATENATED MODULE: ./src/pages/Register.js\nvar _templateObject;var REGISTER_USER=Object(lib[\"a\" /* default */])(_templateObject||(_templateObject=Object(taggedTemplateLiteral[\"a\" /* default */])([\"\\n  mutation register($username: String! $email: String! $password: String! $confirmPassword: String!){\\n    register(username: $username email: $email password: $password confirmPassword: $confirmPassword){\\n      username createdAt\\n    }\\n  }\\n\"])));var Register_Register=function Register(props){var _errors$email,_errors$username,_errors$password,_errors$confirmPasswo;var _useState=Object(react[\"useState\"])({username:'',email:'',password:'',confirmPassword:''}),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),variables=_useState2[0],setVariables=_useState2[1];var _useState3=Object(react[\"useState\"])({}),_useState4=Object(slicedToArray[\"a\" /* default */])(_useState3,2),errors=_useState4[0],setErrors=_useState4[1];var _useMutation=Object(useMutation[\"a\" /* useMutation */])(REGISTER_USER,{// Redirect to login page when registered\nupdate:function update(cache,res){return props.history.push('/login');},// Handle error\nonError:function onError(err){// console.log('errors - seterrors : ', errors)\n// console.log('ERROR : ', error)\n// console.log('DATA : ', data)\n// console.log('onerror: ', err)\n// console.log('object: ', err.networkError.result.errors)\n// console.log('json: ', JSON.stringify(err))\n// console.log('err ', err)\nconsole.log('err: ',err.graphQLErrors[0].extensions.errors);setErrors(err.graphQLErrors[0].extensions.errors);}}),_useMutation2=Object(slicedToArray[\"a\" /* default */])(_useMutation,2),registerUser=_useMutation2[0],_useMutation2$=_useMutation2[1],loading=_useMutation2$.loading,data=_useMutation2$.data,error=_useMutation2$.error;var submitRegistrationForm=function submitRegistrationForm(event){event.preventDefault();console.log('variables: ',variables);registerUser({variables:variables});};return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Row[\"a\" /* default */],{className:\"bg-white rounded-3 py-5 justify-content-center\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Col[\"a\" /* default */],{sm:8,md:6,lg:4,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h1\",{className:\"text-center\",children:\"REGISTER\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Form[\"a\" /* default */],{onSubmit:submitRegistrationForm,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Form[\"a\" /* default */].Group,{className:\"mb-3\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Form[\"a\" /* default */].Label,{className:errors.email&&'text-danger',children:(_errors$email=errors.email)!==null&&_errors$email!==void 0?_errors$email:'Email address'}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Form[\"a\" /* default */].Control,{type:\"email\",value:variables.email,className:errors.email&&'is-invalid',onChange:function onChange(e){return setVariables(Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},variables),{},{email:e.target.value}));}})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Form[\"a\" /* default */].Group,{className:\"mb-3\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Form[\"a\" /* default */].Label,{className:errors.username&&'text-danger',children:(_errors$username=errors.username)!==null&&_errors$username!==void 0?_errors$username:'Username'}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Form[\"a\" /* default */].Control,{type:\"text\",value:variables.username,className:errors.username&&'is-invalid',onChange:function onChange(e){return setVariables(Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},variables),{},{username:e.target.value}));}})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Form[\"a\" /* default */].Group,{className:\"mb-3\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Form[\"a\" /* default */].Label,{className:errors.password&&'text-danger',children:(_errors$password=errors.password)!==null&&_errors$password!==void 0?_errors$password:'Password'}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Form[\"a\" /* default */].Control,{type:\"password\",value:variables.password,className:errors.password&&'is-invalid',onChange:function onChange(e){return setVariables(Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},variables),{},{password:e.target.value}));}})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Form[\"a\" /* default */].Group,{className:\"mb-3\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Form[\"a\" /* default */].Label,{className:errors.confirmPassword&&'text-danger',children:(_errors$confirmPasswo=errors.confirmPassword)!==null&&_errors$confirmPasswo!==void 0?_errors$confirmPasswo:'Confirm Password'}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Form[\"a\" /* default */].Control,{type:\"password\",value:variables.confirmPassword,className:errors.confirmPassword&&'is-invalid',onChange:function onChange(e){return setVariables(Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},variables),{},{confirmPassword:e.target.value}));}})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"text-center\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button[\"a\" /* default */],{variant:\"success\",type:\"submit\",disabled:loading,children:loading?'loading..':'Register'}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"br\",{}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"small\",{children:[\"Already have an account ? \",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router_dom[\"b\" /* Link */],{to:\"/login\",children:\"Login\"})]})]})]})]})});};\n// EXTERNAL MODULE: ./node_modules/@apollo/client/react/hooks/useLazyQuery.js + 3 modules\nvar useLazyQuery = __webpack_require__(138);\n\n// CONCATENATED MODULE: ./src/pages/Login.js\nvar Login_templateObject;var LOGIN_USER=Object(lib[\"a\" /* default */])(Login_templateObject||(Login_templateObject=Object(taggedTemplateLiteral[\"a\" /* default */])([\"\\n  query login($username: String! $password: String!) {\\n    login(username: $username password: $password) {\\n      username\\n      token\\n      createdAt\\n    }\\n  }\\n\"])));var Login_Login=function Login(){var _errors$username,_errors$password;var _useState=Object(react[\"useState\"])({username:'',password:''}),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),variables=_useState2[0],setVariables=_useState2[1];var _useState3=Object(react[\"useState\"])({}),_useState4=Object(slicedToArray[\"a\" /* default */])(_useState3,2),errors=_useState4[0],setErrors=_useState4[1];var authDispatch=auth_useAuthDispatch();var _useLazyQuery=Object(useLazyQuery[\"a\" /* useLazyQuery */])(LOGIN_USER,{onError:function onError(err){return setErrors(err.graphQLErrors[0].extensions.errors);},onCompleted:function onCompleted(data){// we are now setting data in context auth\nauthDispatch({type:'LOGIN',payload:data.login});window.location.href='/';}}),_useLazyQuery2=Object(slicedToArray[\"a\" /* default */])(_useLazyQuery,2),loginUser=_useLazyQuery2[0],_useLazyQuery2$=_useLazyQuery2[1],loading=_useLazyQuery2$.loading,data=_useLazyQuery2$.data,error=_useLazyQuery2$.error;var submitLoginForm=function submitLoginForm(event){event.preventDefault();console.log('Variables: ',variables);loginUser({variables:variables});};return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Row[\"a\" /* default */],{className:\"bg-white rounded-3 py-5 justify-content-center\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Col[\"a\" /* default */],{sm:8,md:6,lg:4,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h1\",{className:\"text-center\",children:\"Login\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Form[\"a\" /* default */],{onSubmit:submitLoginForm,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Form[\"a\" /* default */].Group,{className:\"mb-3\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Form[\"a\" /* default */].Label,{className:errors.username&&'text-danger',children:(_errors$username=errors.username)!==null&&_errors$username!==void 0?_errors$username:'Username'}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Form[\"a\" /* default */].Control,{type:\"text\",placeholder:\"Enter user name\",value:variables.username,className:errors.username&&'is-invalid',onChange:function onChange(e){return setVariables(Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},variables),{},{username:e.target.value}));}})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Form[\"a\" /* default */].Group,{className:\"mb-3\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Form[\"a\" /* default */].Label,{className:errors.password&&'text-danger',children:(_errors$password=errors.password)!==null&&_errors$password!==void 0?_errors$password:'Password'}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Form[\"a\" /* default */].Control,{type:\"password\",placeholder:\"Enter password\",value:variables.password,className:errors.password&&'is-invalid',onChange:function onChange(e){return setVariables(Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},variables),{},{password:e.target.value}));}})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"text-center\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button[\"a\" /* default */],{variant:\"success\",type:\"submit\",disabled:loading,children:loading?'loading..':'Login'}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"br\",{}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"small\",{children:[\"Don't have an account ? \",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router_dom[\"b\" /* Link */],{to:\"/register\",children:\"Register here\"})]})]})]})]})});};\n// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/Card.js + 3 modules\nvar Card = __webpack_require__(137);\n\n// EXTERNAL MODULE: ./node_modules/classnames/index.js\nvar classnames = __webpack_require__(6);\nvar classnames_default = /*#__PURE__*/__webpack_require__.n(classnames);\n\n// EXTERNAL MODULE: ./node_modules/moment/moment.js\nvar moment = __webpack_require__(49);\nvar moment_default = /*#__PURE__*/__webpack_require__.n(moment);\n\n// EXTERNAL MODULE: ./node_modules/@apollo/client/react/hooks/useSubscription.js + 1 modules\nvar useSubscription = __webpack_require__(142);\n\n// CONCATENATED MODULE: ./src/pages/Message.js\nfunction Message(_ref){var message=_ref.message;var _useAuthState=auth_useAuthState(),user=_useAuthState.user;var sent=message.from===user.username;var received=!sent;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:classnames_default()('d-flex flex-column my-1',{'ms-auto':sent,'me-auto':received}),children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:classnames_default()('position-relative pt-3 px-3 rounded-pill',{'bg-primary text-end':sent,'bg-light text-start':received}),children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{className:classnames_default()({'text-white':sent}),children:message.content},message.id)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:classnames_default()('text-end',{'text-end':sent,'text-start':received}),children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"p\",{children:[message.from,\": \",moment_default()(message.createdAt).format('DD MMM @ h:mm a')]})})]});}\n// CONCATENATED MODULE: ./src/pages/Chatroom.js\nvar Chatroom_templateObject,_templateObject2,_templateObject3;var GET_MESSAGES=Object(lib[\"a\" /* default */])(Chatroom_templateObject||(Chatroom_templateObject=Object(taggedTemplateLiteral[\"a\" /* default */])([\"\\n  query getMessages($to: String!){\\n    getMessages(to: $to){\\n      content from to createdAt\\n    }\\n  }\\n\"])));var SEND_MESSAGE=Object(lib[\"a\" /* default */])(_templateObject2||(_templateObject2=Object(taggedTemplateLiteral[\"a\" /* default */])([\"\\n  mutation sendMessage($to: String! $content: String!){\\n    sendMessage(to: $to content: $content){\\n      id content from to createdAt\\n    }\\n  }\\n\"])));var NEW_MESSAGE=Object(lib[\"a\" /* default */])(_templateObject3||(_templateObject3=Object(taggedTemplateLiteral[\"a\" /* default */])([\"\\n  subscription newMessage {\\n    newMessage{\\n      id from content to createdAt\\n    }\\n  }\\n\"])));var Chatroom_Chatroom=function Chatroom(){// const { user } = useAuthState()\nvar _useMessageState=message_useMessageState(),groups=_useMessageState.groups;var dispatch=message_useMessageDispatch();var _useState=Object(react[\"useState\"])(''),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),content=_useState2[0],setContent=_useState2[1];var selectedGroup=groups===null||groups===void 0?void 0:groups.find(function(group){return group.selected===true;});// console.log('selected group : ', selectedGroup)\nvar messages=selectedGroup===null||selectedGroup===void 0?void 0:selectedGroup.messages;// console.log('messages: ', messages)\nvar _useSubscription=Object(useSubscription[\"a\" /* useSubscription */])(NEW_MESSAGE),messageData=_useSubscription.data,messageError=_useSubscription.error;var _useLazyQuery=Object(useLazyQuery[\"a\" /* useLazyQuery */])(GET_MESSAGES),_useLazyQuery2=Object(slicedToArray[\"a\" /* default */])(_useLazyQuery,2),getMessages=_useLazyQuery2[0],_useLazyQuery2$=_useLazyQuery2[1],messagesLoading=_useLazyQuery2$.loading,messagesData=_useLazyQuery2$.data;var _useMutation=Object(useMutation[\"a\" /* useMutation */])(SEND_MESSAGE,{onError:function onError(err){return console.log(err);}}),_useMutation2=Object(slicedToArray[\"a\" /* default */])(_useMutation,1),sendMessage=_useMutation2[0];Object(react[\"useEffect\"])(function(){if(messageError)console.log(messageError);if(messageData){var message=messageData.newMessage;dispatch({type:'ADD_MESSAGE',payload:{groupname:message.to,message:message}});}},[messageError,messageData]);Object(react[\"useEffect\"])(function(){if(selectedGroup&&!selectedGroup.messages){getMessages({variables:{to:selectedGroup.groupname}});}},[selectedGroup]);Object(react[\"useEffect\"])(function(){if(messagesData){console.log('messages Data : ',messagesData);dispatch({type:'SET_GROUP_MESSAGES',payload:{groupname:selectedGroup.groupname,messages:messagesData.getMessages}});}},[messagesData]);var submitMessage=function submitMessage(e){e.preventDefault();if(content.trim()===''||!selectedGroup)return;console.log('send message: ',content);setContent('');//mutation for sending a message\nsendMessage({variables:{to:selectedGroup.groupname,content:content}});};var selectedChatMarkup;if(!messages&&!messagesLoading){selectedChatMarkup=/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{className:\"info-text\",children:\"Select a friend\"});}else if(messagesLoading){selectedChatMarkup=/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{className:\"info-text\",children:\"loading...\"});}else if(messages.length>0){selectedChatMarkup=messages.map(function(message,index){return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(react[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Message,{message:message}),index===messages.length-1&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"invisible\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"hr\",{className:\"m-0\"})})]},message.id);});}else if(messages.length===0){selectedChatMarkup=/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{className:\"info-text\",children:\"You are now connected! send your first message\"});}var home=function home(){window.location.href='/';};return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Col[\"a\" /* default */],{xs:10,md:8,className:\"chat-box p-2\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"d-flex justify-content-end m-3\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button[\"a\" /* default */],{variant:\"outline-danger\",className:\"leave-room\",onClick:home,children:\"Leave Room\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"messages-box d-flex flex-column-reverse my-3 p-3\",children:selectedChatMarkup}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"px-3 py-2 mb-3 mt-2\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Form[\"a\" /* default */],{onSubmit:submitMessage,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Form[\"a\" /* default */].Group,{className:\"d-flex align-items-center m-0\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Form[\"a\" /* default */].Control,{type:\"text\",className:\"message-input rounded-pill p-3 border-0\",placeholder:\"Type a message...\",value:content,onChange:function onChange(e){return setContent(e.target.value);}}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:\"fas fa-paper-plane fa-2x text-primary ms-2\",role:\"button\",onClick:submitMessage})]})})})]});};\n// CONCATENATED MODULE: ./src/pages/Home.js\nvar Home_templateObject,Home_templateObject2;var GET_GROUP_COUNT=Object(lib[\"a\" /* default */])(Home_templateObject||(Home_templateObject=Object(taggedTemplateLiteral[\"a\" /* default */])([\"\\n  query getGroupCount{\\n    getGroupCount\\n  }\\n\"])));var GET_GROUPS=Object(lib[\"a\" /* default */])(Home_templateObject2||(Home_templateObject2=Object(taggedTemplateLiteral[\"a\" /* default */])([\"\\n  mutation getGroups($page: Int!){\\n    getGroups(page: $page){\\n      groupname groupdesc createdAt\\n    }\\n  }\\n\"])));var Home_Home=function Home(){var _groups$find;var authDispatch=auth_useAuthDispatch();// const { user } = useAuthState()\nvar dispatch=message_useMessageDispatch();var _useMessageState=message_useMessageState(),groups=_useMessageState.groups;var selectedGroup=groups===null||groups===void 0?void 0:(_groups$find=groups.find(function(group){return group.selected===true;}))===null||_groups$find===void 0?void 0:_groups$find.groupname;var _useState=Object(react[\"useState\"])(false),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),clicked=_useState2[0],setClicked=_useState2[1];var _useState3=Object(react[\"useState\"])(1),_useState4=Object(slicedToArray[\"a\" /* default */])(_useState3,2),currentPage=_useState4[0],setCurrentPage=_useState4[1];var _useState5=Object(react[\"useState\"])(0),_useState6=Object(slicedToArray[\"a\" /* default */])(_useState5,2),totalGroups=_useState6[0],setTotalGroups=_useState6[1];// const [totalPages, setTotalPages] = useState([])\nvar pageNumbers=[];// const [groups, setGroups] = useState([])\n// const [getGroups, { loading, data, error }] = useLazyQuery(GET_GROUPS)\n// const { loading } = useMutation(GET_GROUPS, {\n//   onCompleted: (data) => dispatch({ type: 'SET_GROUPS', payload: data.getGroups }),\n//   onError: (err) => console.log('error in query: ', err)\n// })\nvar _useLazyQuery=Object(useLazyQuery[\"a\" /* useLazyQuery */])(GET_GROUP_COUNT,{onError:function onError(err){return console.log('errrrrr',err);},onCompleted:function onCompleted(data){console.log('count: ',data);setTotalGroups(data.getGroupCount);}}),_useLazyQuery2=Object(slicedToArray[\"a\" /* default */])(_useLazyQuery,1),getGroupCount=_useLazyQuery2[0];var _useMutation=Object(useMutation[\"a\" /* useMutation */])(GET_GROUPS,{onError:function onError(err){return console.log(err);},onCompleted:function onCompleted(data){return dispatch({type:'SET_GROUPS',payload:data.getGroups});}}),_useMutation2=Object(slicedToArray[\"a\" /* default */])(_useMutation,2),getGroups=_useMutation2[0],loading=_useMutation2[1].loading;if(totalGroups>0){for(var i=1;i<=Math.ceil(totalGroups/3);i++){pageNumbers.push(i);}}Object(react[\"useEffect\"])(function(){getGroupCount();console.log('total groups: ',totalGroups);getGroups({variables:{page:currentPage}});},[currentPage,totalGroups,getGroupCount,getGroups]);var groupsMarkup;if(!groups||loading){groupsMarkup=/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{children:\"loading..\"});}else if(groups.length===0){groupsMarkup=/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{children:\"no groups created yet\"});}else if(groups.length>0){groupsMarkup=groups.map(function(group){var selected=selectedGroup===group.groupname;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Col[\"a\" /* default */],{sm:12,md:6,lg:4,className:\"my-2 mx-auto\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Card[\"a\" /* default */],{className:\"text-center pt-1\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Card[\"a\" /* default */].Body,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Card[\"a\" /* default */].Title,{className:\"text-uppercase\",children:group.groupname}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Card[\"a\" /* default */].Text,{className:\"text-capitalize\",children:group.groupdesc}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button[\"a\" /* default */],{variant:\"primary\",className:classnames_default()(\"mb-3\",{'btn-warning':selected}),onClick:function onClick(){dispatch({type:'SET_SELECTED_GROUP',payload:group.groupname});setClicked(true);},children:\"Enter group\"})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Card[\"a\" /* default */].Footer,{className:\"text-muted\",children:[\"Created: \",moment_default()(group.createdAt).format('MMM DD, YYYY @ h:mm a')]})]})},group.groupname);});}var logout=function logout(){authDispatch({type:'LOGOUT'});window.location.href='/login';};var paginate=function paginate(pageNumber){console.log('selected page number: ',pageNumber);setCurrentPage(pageNumber);};return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(react[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Row[\"a\" /* default */],{className:\"justify-content-end mx-auto mb-3\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Col[\"a\" /* default */],{className:\"text-end\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button[\"a\" /* default */],{variant:\"link\",className:\"btn-light text-decoration-none\",onClick:logout,children:\"Logout\"})})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Row[\"a\" /* default */],{children:clicked===false?groupsMarkup:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Chatroom_Chatroom,{})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"nav\",{children:clicked===false?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"ul\",{className:\"pagination justify-content-end\",children:pageNumbers.map(function(page){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"li\",{className:\"page-item\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button[\"a\" /* default */],{variant:\"link\",className:\"page-link\",onClick:function onClick(){return paginate(page);},children:page})},page);})}):''})]});};\n// CONCATENATED MODULE: ./src/components/AuthRouteComponent.js\nfunction AuthRouteComponent(props){var _useAuthState=auth_useAuthState(),user=_useAuthState.user;if(props.authenticated&&!user){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router[\"a\" /* Redirect */],{to:\"/login\"});}else if(props.guest&&user){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router[\"a\" /* Redirect */],{to:\"/\"});}else{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router[\"b\" /* Route */],Object(objectSpread2[\"a\" /* default */])({component:props.component},props));}}\n// CONCATENATED MODULE: ./src/App.js\nfunction App_App(){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ApolloProvider_ApolloProvider,{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(auth_AuthProvider,{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(message_MessageProvider,{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router_dom[\"a\" /* BrowserRouter */],{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Container[\"a\" /* default */],{className:\"pt-5\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(react_router[\"d\" /* Switch */],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AuthRouteComponent,{exact:true,path:\"/\",component:Home_Home,authenticated:true}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AuthRouteComponent,{path:\"/chat\",component:Chatroom_Chatroom,authenticated:true}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AuthRouteComponent,{path:\"/register\",component:Register_Register,guest:true}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AuthRouteComponent,{path:\"/login\",component:Login_Login,guest:true})]})})})})})});}/* harmony default export */ var src_App = (App_App);\n// CONCATENATED MODULE: ./src/index.js\nreact_dom_default.a.render(/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_default.a.StrictMode,{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(src_App,{})}),document.getElementById('root'));\n\n/***/ }),\n\n/***/ 98:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ })\n\n},[[122,1,2]]]);","inputSourceMap":{"version":3,"sources":["/Users/divyanshisaxena/Desktop/divyanshi/learning/gql/group-chat-app/client/src/ApolloProvider.js","/Users/divyanshisaxena/Desktop/divyanshi/learning/gql/group-chat-app/client/src/context/auth.js","/Users/divyanshisaxena/Desktop/divyanshi/learning/gql/group-chat-app/client/src/context/message.js","/Users/divyanshisaxena/Desktop/divyanshi/learning/gql/group-chat-app/client/src/pages/Register.js","/Users/divyanshisaxena/Desktop/divyanshi/learning/gql/group-chat-app/client/src/pages/Login.js","/Users/divyanshisaxena/Desktop/divyanshi/learning/gql/group-chat-app/client/src/pages/Message.js","/Users/divyanshisaxena/Desktop/divyanshi/learning/gql/group-chat-app/client/src/pages/Chatroom.js","/Users/divyanshisaxena/Desktop/divyanshi/learning/gql/group-chat-app/client/src/pages/Home.js","/Users/divyanshisaxena/Desktop/divyanshi/learning/gql/group-chat-app/client/src/components/AuthRouteComponent.js","/Users/divyanshisaxena/Desktop/divyanshi/learning/gql/group-chat-app/client/src/App.js","/Users/divyanshisaxena/Desktop/divyanshi/learning/gql/group-chat-app/client/src/index.js","/Users/divyanshisaxena/Desktop/divyanshi/learning/gql/group-chat-app/client/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-6-0!/Users/divyanshisaxena/Desktop/divyanshi/learning/gql/group-chat-app/client/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-6-1!/Users/divyanshisaxena/Desktop/divyanshi/learning/gql/group-chat-app/client/node_modules/postcss-loader/src/index.js??postcss!/Users/divyanshisaxena/Desktop/divyanshi/learning/gql/group-chat-app/client/node_modules/resolve-url-loader/index.js??ref--5-oneOf-6-3!/Users/divyanshisaxena/Desktop/divyanshi/learning/gql/group-chat-app/client/node_modules/sass-loader/dist/cjs.js??ref--5-oneOf-6-4!/Users/divyanshisaxena/Desktop/divyanshi/learning/gql/group-chat-app/client/src/App.scss"],"names":["httpLink","createHttpLink","uri","authLink","setContext","_","headers","token","localStorage","getItem","authorization","concat","wsLink","WebSocketLink","options","reconnect","connectionParams","Authorization","splitLink","split","query","definition","getMainDefinition","kind","operation","client","ApolloClient","link","cache","InMemoryCache","onError","networkError","graphQLErrors","console","log","ApolloProvider","props","AuthStateContext","createContext","AuthDispatchContext","user","decodedToken","jwtDecode","expiresAt","Date","exp","removeItem","authReducer","state","action","type","setItem","payload","Error","AuthProvider","children","useReducer","dispatch","useAuthState","useContext","useAuthDispatch","MessageStateContext","MessageDispatchContext","messageReducer","groupsCopy","groupIndex","groupname","message","messages","groups","findIndex","group","map","selected","newGroup","MessageProvider","useMessageState","useMessageDispatch","REGISTER_USER","gql","Register","useState","username","email","password","confirmPassword","variables","setVariables","errors","setErrors","useMutation","update","res","history","push","err","extensions","registerUser","loading","data","error","submitRegistrationForm","event","preventDefault","e","target","value","LOGIN_USER","Login","authDispatch","useLazyQuery","onCompleted","login","window","location","href","loginUser","submitLoginForm","Message","sent","from","received","classNames","content","id","moment","createdAt","format","GET_MESSAGES","SEND_MESSAGE","NEW_MESSAGE","Chatroom","setContent","selectedGroup","find","useSubscription","messageData","messageError","getMessages","messagesLoading","messagesData","sendMessage","useEffect","newMessage","to","submitMessage","trim","selectedChatMarkup","length","index","home","GET_GROUP_COUNT","GET_GROUPS","Home","clicked","setClicked","currentPage","setCurrentPage","totalGroups","setTotalGroups","pageNumbers","getGroupCount","getGroups","i","Math","ceil","page","groupsMarkup","groupdesc","logout","paginate","pageNumber","AuthRouteComponent","authenticated","guest","component","App","ReactDOM","render","document","getElementById"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAYA,GAAIA,SAAQ,CAAGC,gDAAc,CAAC,CAC5BC,GAAG,CAAE,kDADuB,CAAD,CAA7B,CAIA;AACA;AACA,GAAMC,SAAQ,CAAGC,qCAAU,CAAC,SAACC,CAAD,MAAoB,IAAdC,QAAc,MAAdA,OAAc,CAC9C;AACA,GAAMC,MAAK,CAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd,CACA;AACA,MAAO,CACLH,OAAO,CAAC,qFACHA,OADE,MAELI,aAAa,CAAEH,KAAK,kBAAaA,KAAb,EAAuB,EAFtC,EADF,CAAP,CAMD,CAV0B,CAA3B,CAYAP,QAAQ,CAAGG,QAAQ,CAACQ,MAAT,CAAgBX,QAAhB,CAAX,CAEA,GAAMY,OAAM,CAAG,GAAIC,4BAAJ,CAAkB,CAC/BX,GAAG,CAAE,sDAD0B,CAE/BY,OAAO,CAAE,CACPC,SAAS,CAAE,IADJ,CAEPC,gBAAgB,CAAE,CAChBC,aAAa,kBAAYT,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAZ,CADG,CAFX,CAFsB,CAAlB,CAAf,CAUA,GAAMS,UAAS,CAAGC,uBAAK,CACrB,eAAe,IAAZC,MAAY,OAAZA,KAAY,CACb,GAAMC,WAAU,CAAGC,+CAAiB,CAACF,KAAD,CAApC,CACA,MACEC,WAAU,CAACE,IAAX,GAAoB,qBAApB,EACAF,UAAU,CAACG,SAAX,GAAyB,cAF3B,CAID,CAPoB,CAQrBZ,MARqB,CASrBZ,QATqB,CAAvB,CAYA,GAAMyB,sBAAM,CAAG,GAAIC,qCAAJ,CAAiB,CAC9BC,IAAI,CAAET,SADwB,CAE9BU,KAAK,CAAE,GAAIC,uCAAJ,EAFuB,CAG9BC,OAAO,CAAE,uBAAqC,IAAlCC,aAAkC,OAAlCA,YAAkC,CAApBC,aAAoB,OAApBA,aAAoB,CAC5CC,OAAO,CAACC,GAAR,CAAY,eAAZ,CAA6BF,aAA7B,EACAC,OAAO,CAACC,GAAR,CAAY,cAAZ,CAA4BH,YAA5B,EACD,CAN6B,CAAjB,CAAf,CASe,QAASI,8BAAT,CAAwBC,KAAxB,CAA+B,CAC5C,mBAAO,2BAAC,wCAAD,2CAAU,MAAM,CAAEX,qBAAlB,EAA8BW,KAA9B,EAAP,CACD,C;;;;;;;;AC9DD,GAAMC,iBAAgB,cAAGC,8BAAa,EAAtC,CACA,GAAMC,oBAAmB,cAAGD,8BAAa,EAAzC,CAEA,GAAIE,UAAI,CAAG,IAAX,CACA,GAAMjC,WAAK,CAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd,CACA,GAAIF,UAAJ,CAAW,CACT,GAAMkC,aAAY,CAAGC,yCAAS,CAACnC,UAAD,CAA9B,CACA;AACA,GAAMoC,UAAS,CAAG,GAAIC,KAAJ,CAASH,YAAY,CAACI,GAAb,CAAmB,IAA5B,CAAlB,CACAZ,OAAO,CAACC,GAAR,CAAY,SAAZ,CAAuBS,SAAvB,EACA,GAAI,GAAIC,KAAJ,GAAaD,SAAjB,CAA4B,CAC1BnC,YAAY,CAACsC,UAAb,CAAwB,OAAxB,EACD,CAFD,IAGK,CACHN,SAAI,CAAGC,YAAP,CACD,CACF,CAXD,IAYK,CACHR,OAAO,CAACC,GAAR,CAAY,gBAAZ,EACD,CAED,GAAMa,iBAAW,CAAG,QAAdA,YAAc,CAACC,KAAD,CAAQC,MAAR,CAAmB,CACrC,OAAQA,MAAM,CAACC,IAAf,EACE,IAAK,OAAL,CACE1C,YAAY,CAAC2C,OAAb,CAAqB,OAArB,CAA8BF,MAAM,CAACG,OAAP,CAAe7C,KAA7C,EACA,OAAO,qFACFyC,KADL,MAEER,IAAI,CAAES,MAAM,CAACG,OAFf,GAIF,IAAK,QAAL,CACE5C,YAAY,CAACsC,UAAb,CAAwB,OAAxB,EACA,OAAO,qFACFE,KADL,MAEER,IAAI,CAAE,IAFR,GAIF,QACE,KAAM,IAAIa,MAAJ,gCAAkCJ,MAAM,CAACC,IAAzC,EAAN,CAdJ,CAgBD,CAjBD,CAmBO,GAAMI,kBAAY,CAAG,QAAfA,aAAe,MAAkB,IAAfC,SAAe,MAAfA,QAAe,CAC5C,gBAA0BC,2BAAU,CAACT,gBAAD,CAAc,CAAEP,IAAI,CAAJA,SAAF,CAAd,CAApC,sEAAOQ,KAAP,iBAAcS,QAAd,iBACA,mBACE,2BAAC,mBAAD,CAAqB,QAArB,EAA8B,KAAK,CAAEA,QAArC,uBACE,2BAAC,gBAAD,CAAkB,QAAlB,EAA2B,KAAK,CAAET,KAAlC,UACGO,QADH,EADF,EADF,CAOD,CATM,CAWA,GAAMG,kBAAY,CAAG,QAAfA,aAAe,SAAMC,4BAAU,CAACtB,gBAAD,CAAhB,EAArB,CACA,GAAMuB,qBAAe,CAAG,QAAlBA,gBAAkB,SAAMD,4BAAU,CAACpB,mBAAD,CAAhB,EAAxB,C;;;;;ACrDP,GAAMsB,oBAAmB,cAAGvB,8BAAa,EAAzC,CACA,GAAMwB,uBAAsB,cAAGxB,8BAAa,EAA5C,CAEA,GAAMyB,uBAAc,CAAG,QAAjBA,eAAiB,CAACf,KAAD,CAAQC,MAAR,CAAmB,CACxC,GAAIe,WAAJ,CAAgBC,UAAhB,CACA,oBAAyChB,MAAM,CAACG,OAAhD,CAAQc,SAAR,iBAAQA,SAAR,CAAmBC,OAAnB,iBAAmBA,OAAnB,CAA4BC,QAA5B,iBAA4BA,QAA5B,CACA,OAAQnB,MAAM,CAACC,IAAf,EACE,IAAK,YAAL,CACE,OAAO,qFACFF,KADL,MAEEqB,MAAM,CAAEpB,MAAM,CAACG,OAFjB,GAIF,IAAK,oBAAL,CACEY,UAAU,8CAAOhB,KAAK,CAACqB,MAAb,CAAV,CACAJ,UAAU,CAAGD,UAAU,CAACM,SAAX,CAAqB,SAAAC,KAAK,QAAIA,MAAK,CAACL,SAAN,GAAoBA,SAAxB,EAA1B,CAAb,CACAF,UAAU,CAACC,UAAD,CAAV,sFAA6BD,UAAU,CAACC,UAAD,CAAvC,MAAqDG,QAAQ,CAARA,QAArD,GACA,OAAO,qFACFpB,KADL,MAEEqB,MAAM,CAAEL,UAFV,GAIF,IAAK,oBAAL,CACEA,UAAU,CAAGhB,KAAK,CAACqB,MAAN,CAAaG,GAAb,CAAiB,SAAAD,KAAK,8FAC9BA,KAD8B,MAEjCE,QAAQ,CAAEF,KAAK,CAACL,SAAN,GAAoBjB,MAAM,CAACG,OAFJ,IAAtB,CAAb,CAIA,OAAO,qFACFJ,KADL,MAEEqB,MAAM,CAAEL,UAFV,GAIF,IAAK,aAAL,CACEA,UAAU,8CAAOhB,KAAK,CAACqB,MAAb,CAAV,CACAJ,UAAU,CAAGD,UAAU,CAACM,SAAX,CAAqB,SAAAC,KAAK,QAAIA,MAAK,CAACL,SAAN,GAAoBA,SAAxB,EAA1B,CAAb,CACA,GAAIQ,SAAQ,sFACPV,UAAU,CAACC,UAAD,CADH,MAEVG,QAAQ,CAAEJ,UAAU,CAACC,UAAD,CAAV,CAAuBG,QAAvB,EACLD,OADK,sDACOH,UAAU,CAACC,UAAD,CAAV,CAAuBG,QAD9B,GAEN,IAJM,EAAZ,CAMAJ,UAAU,CAACC,UAAD,CAAV,CAAyBS,QAAzB,CACAzC,OAAO,CAACC,GAAR,CAAY,cAAZ,CAA4BwC,QAA5B,EACA,OAAO,qFACF1B,KADL,MAEEqB,MAAM,CAAEL,UAFV,GAlCJ,CAuCD,CA1CD,CA2CO,GAAMW,wBAAe,CAAG,QAAlBA,gBAAkB,MAAkB,IAAfpB,SAAe,MAAfA,QAAe,CAC/C,gBAA0BC,2BAAU,CAACO,sBAAD,CAAiB,CAAEM,MAAM,CAAE,IAAV,CAAjB,CAApC,sEAAOrB,KAAP,iBAAcS,QAAd,iBACA,mBACE,2BAAC,sBAAD,CAAwB,QAAxB,EAAiC,KAAK,CAAEA,QAAxC,uBACE,2BAAC,mBAAD,CAAqB,QAArB,EAA8B,KAAK,CAAET,KAArC,UACGO,QADH,EADF,EADF,CAOD,CATM,CAWA,GAAMqB,wBAAe,CAAG,QAAlBA,gBAAkB,SAAMjB,4BAAU,CAACE,mBAAD,CAAhB,EAAxB,CACA,GAAMgB,2BAAkB,CAAG,QAArBA,mBAAqB,SAAMlB,4BAAU,CAACG,sBAAD,CAAhB,EAA3B,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;oBCvDP,GAAMgB,cAAa,CAAGC,8BAAH,kVAAnB,CAOO,GAAMC,kBAAQ,CAAG,QAAXA,SAAW,CAAC5C,KAAD,CAAW,2EAEjC,cAAkC6C,yBAAQ,CAAC,CACzCC,QAAQ,CAAE,EAD+B,CAEzCC,KAAK,CAAE,EAFkC,CAGzCC,QAAQ,CAAE,EAH+B,CAIzCC,eAAe,CAAE,EAJwB,CAAD,CAA1C,kEAAOC,SAAP,eAAkBC,YAAlB,eAOA,eAA4BN,yBAAQ,CAAC,EAAD,CAApC,mEAAOO,MAAP,eAAeC,SAAf,eAEA,iBAAiDC,0CAAW,CAACZ,aAAD,CAAgB,CAE1E;AACAa,MAAM,CAAE,gBAAC/D,KAAD,CAAQgE,GAAR,QAAgBxD,MAAK,CAACyD,OAAN,CAAcC,IAAd,CAAmB,QAAnB,CAAhB,EAHkE,CAI1E;AACAhE,OAAO,CAAE,iBAACiE,GAAD,CAAS,CAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA9D,OAAO,CAACC,GAAR,CAAY,OAAZ,CAAqB6D,GAAG,CAAC/D,aAAJ,CAAkB,CAAlB,EAAqBgE,UAArB,CAAgCR,MAArD,EACAC,SAAS,CAACM,GAAG,CAAC/D,aAAJ,CAAkB,CAAlB,EAAqBgE,UAArB,CAAgCR,MAAjC,CAAT,CACD,CAfyE,CAAhB,CAA5D,wEAAOS,YAAP,kDAAuBC,OAAvB,gBAAuBA,OAAvB,CAAgCC,IAAhC,gBAAgCA,IAAhC,CAAsCC,KAAtC,gBAAsCA,KAAtC,CAkBA,GAAMC,uBAAsB,CAAG,QAAzBA,uBAAyB,CAACC,KAAD,CAAW,CACxCA,KAAK,CAACC,cAAN,GACAtE,OAAO,CAACC,GAAR,CAAY,aAAZ,CAA2BoD,SAA3B,EACAW,YAAY,CAAC,CAAEX,SAAS,CAATA,SAAF,CAAD,CAAZ,CACD,CAJD,CAMA,mBACE,2BAAC,sBAAD,EAAK,SAAS,CAAC,gDAAf,uBACE,4BAAC,sBAAD,EAAK,EAAE,CAAE,CAAT,CAAY,EAAE,CAAE,CAAhB,CAAmB,EAAE,CAAE,CAAvB,wBAGE,iCAAI,SAAS,CAAC,aAAd,sBAHF,cAME,4BAAC,uBAAD,EAAM,QAAQ,CAAEe,sBAAhB,wBAEE,4BAAC,uBAAD,CAAM,KAAN,EAAY,SAAS,CAAC,MAAtB,wBACE,2BAAC,uBAAD,CAAM,KAAN,EAAY,SAAS,CAAEb,MAAM,CAACL,KAAP,EAAgB,aAAvC,yBACGK,MAAM,CAACL,KADV,+CACmB,eADnB,EADF,cAIE,2BAAC,uBAAD,CAAM,OAAN,EAAc,IAAI,CAAC,OAAnB,CACE,KAAK,CAAEG,SAAS,CAACH,KADnB,CAC0B,SAAS,CAAEK,MAAM,CAACL,KAAP,EAAgB,YADrD,CAEE,QAAQ,CAAE,kBAAAqB,CAAC,QAAIjB,aAAY,CAAC,qFAAKD,SAAN,MAAiBH,KAAK,CAAEqB,CAAC,CAACC,MAAF,CAASC,KAAjC,GAAhB,EAFb,EAJF,GAFF,cAWE,4BAAC,uBAAD,CAAM,KAAN,EAAY,SAAS,CAAC,MAAtB,wBACE,2BAAC,uBAAD,CAAM,KAAN,EAAY,SAAS,CAAElB,MAAM,CAACN,QAAP,EAAmB,aAA1C,4BACGM,MAAM,CAACN,QADV,qDACsB,UADtB,EADF,cAIE,2BAAC,uBAAD,CAAM,OAAN,EAAc,IAAI,CAAC,MAAnB,CACE,KAAK,CAAEI,SAAS,CAACJ,QADnB,CAC6B,SAAS,CAAEM,MAAM,CAACN,QAAP,EAAmB,YAD3D,CAEE,QAAQ,CAAE,kBAAAsB,CAAC,QAAIjB,aAAY,CAAC,qFAAKD,SAAN,MAAiBJ,QAAQ,CAAEsB,CAAC,CAACC,MAAF,CAASC,KAApC,GAAhB,EAFb,EAJF,GAXF,cAoBE,4BAAC,uBAAD,CAAM,KAAN,EAAY,SAAS,CAAC,MAAtB,wBACE,2BAAC,uBAAD,CAAM,KAAN,EAAY,SAAS,CAAElB,MAAM,CAACJ,QAAP,EAAmB,aAA1C,4BACGI,MAAM,CAACJ,QADV,qDACsB,UADtB,EADF,cAIE,2BAAC,uBAAD,CAAM,OAAN,EAAc,IAAI,CAAC,UAAnB,CACE,KAAK,CAAEE,SAAS,CAACF,QADnB,CAC6B,SAAS,CAAEI,MAAM,CAACJ,QAAP,EAAmB,YAD3D,CAEE,QAAQ,CAAE,kBAAAoB,CAAC,QAAIjB,aAAY,CAAC,qFAAKD,SAAN,MAAiBF,QAAQ,CAAEoB,CAAC,CAACC,MAAF,CAASC,KAApC,GAAhB,EAFb,EAJF,GApBF,cA6BE,4BAAC,uBAAD,CAAM,KAAN,EAAY,SAAS,CAAC,MAAtB,wBACE,2BAAC,uBAAD,CAAM,KAAN,EAAY,SAAS,CAAElB,MAAM,CAACH,eAAP,EAA0B,aAAjD,iCACGG,MAAM,CAACH,eADV,+DAC6B,kBAD7B,EADF,cAIE,2BAAC,uBAAD,CAAM,OAAN,EAAc,IAAI,CAAC,UAAnB,CACE,KAAK,CAAEC,SAAS,CAACD,eADnB,CACoC,SAAS,CAAEG,MAAM,CAACH,eAAP,EAA0B,YADzE,CAEE,QAAQ,CAAE,kBAAAmB,CAAC,QAAIjB,aAAY,CAAC,qFAAKD,SAAN,MAAiBD,eAAe,CAAEmB,CAAC,CAACC,MAAF,CAASC,KAA3C,GAAhB,EAFb,EAJF,GA7BF,cAsCE,mCAAK,SAAS,CAAC,aAAf,wBACE,2BAAC,yBAAD,EAAQ,OAAO,CAAC,SAAhB,CAA0B,IAAI,CAAC,QAA/B,CAAwC,QAAQ,CAAER,OAAlD,UACGA,OAAO,CAAG,WAAH,CAAiB,UAD3B,EADF,cAIE,mCAJF,cAKE,yFAAiC,2BAAC,gCAAD,EAAM,EAAE,CAAC,QAAT,mBAAjC,GALF,GAtCF,GANF,GADF,EADF,CA4DD,CA/FM,C;;;;;yBCNP,GAAMS,WAAU,CAAG5B,8BAAH,+QAAhB,CASO,GAAM6B,YAAK,CAAG,QAARA,MAAQ,EAAM,uCACzB,cAAkC3B,yBAAQ,CAAC,CACzCC,QAAQ,CAAE,EAD+B,CAEzCE,QAAQ,CAAE,EAF+B,CAAD,CAA1C,kEAAOE,SAAP,eAAkBC,YAAlB,eAIA,eAA4BN,yBAAQ,CAAC,EAAD,CAApC,mEAAOO,MAAP,eAAeC,SAAf,eAEA,GAAMoB,aAAY,CAAGjD,oBAAe,EAApC,CAEA,kBAA8CkD,4CAAY,CAACH,UAAD,CAAa,CACrE7E,OAAO,CAAE,iBAACiE,GAAD,QAASN,UAAS,CAACM,GAAG,CAAC/D,aAAJ,CAAkB,CAAlB,EAAqBgE,UAArB,CAAgCR,MAAjC,CAAlB,EAD4D,CAErEuB,WAAW,CAAE,qBAACZ,IAAD,CAAU,CACrB;AACAU,YAAY,CAAC,CAAE3D,IAAI,CAAE,OAAR,CAAiBE,OAAO,CAAE+C,IAAI,CAACa,KAA/B,CAAD,CAAZ,CACAC,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAuB,GAAvB,CACD,CANoE,CAAb,CAA1D,0EAAOC,SAAP,qDAAoBlB,OAApB,iBAAoBA,OAApB,CAA6BC,IAA7B,iBAA6BA,IAA7B,CAAmCC,KAAnC,iBAAmCA,KAAnC,CASA,GAAMiB,gBAAe,CAAG,QAAlBA,gBAAkB,CAACf,KAAD,CAAW,CACjCA,KAAK,CAACC,cAAN,GACAtE,OAAO,CAACC,GAAR,CAAY,aAAZ,CAA2BoD,SAA3B,EACA8B,SAAS,CAAC,CAAE9B,SAAS,CAATA,SAAF,CAAD,CAAT,CACD,CAJD,CAKA,mBACE,2BAAC,sBAAD,EAAK,SAAS,CAAC,gDAAf,uBACE,4BAAC,sBAAD,EAAK,EAAE,CAAE,CAAT,CAAY,EAAE,CAAE,CAAhB,CAAmB,EAAE,CAAE,CAAvB,wBACE,iCAAI,SAAS,CAAC,aAAd,mBADF,cAEE,4BAAC,uBAAD,EAAM,QAAQ,CAAE+B,eAAhB,wBAEE,4BAAC,uBAAD,CAAM,KAAN,EAAY,SAAS,CAAC,MAAtB,wBACE,2BAAC,uBAAD,CAAM,KAAN,EAAY,SAAS,CAAE7B,MAAM,CAACN,QAAP,EAAmB,aAA1C,4BACGM,MAAM,CAACN,QADV,qDACsB,UADtB,EADF,cAIE,2BAAC,uBAAD,CAAM,OAAN,EAAc,IAAI,CAAC,MAAnB,CAA0B,WAAW,CAAC,iBAAtC,CACE,KAAK,CAAEI,SAAS,CAACJ,QADnB,CAC6B,SAAS,CAAEM,MAAM,CAACN,QAAP,EAAmB,YAD3D,CAEE,QAAQ,CAAE,kBAAAsB,CAAC,QAAIjB,aAAY,CAAC,qFAAKD,SAAN,MAAiBJ,QAAQ,CAAEsB,CAAC,CAACC,MAAF,CAASC,KAApC,GAAhB,EAFb,EAJF,GAFF,cAWE,4BAAC,uBAAD,CAAM,KAAN,EAAY,SAAS,CAAC,MAAtB,wBACE,2BAAC,uBAAD,CAAM,KAAN,EAAY,SAAS,CAAElB,MAAM,CAACJ,QAAP,EAAmB,aAA1C,4BACGI,MAAM,CAACJ,QADV,qDACsB,UADtB,EADF,cAIE,2BAAC,uBAAD,CAAM,OAAN,EAAc,IAAI,CAAC,UAAnB,CAA8B,WAAW,CAAC,gBAA1C,CACE,KAAK,CAAEE,SAAS,CAACF,QADnB,CAC6B,SAAS,CAAEI,MAAM,CAACJ,QAAP,EAAmB,YAD3D,CAEE,QAAQ,CAAE,kBAAAoB,CAAC,QAAIjB,aAAY,CAAC,qFAAKD,SAAN,MAAiBF,QAAQ,CAAEoB,CAAC,CAACC,MAAF,CAASC,KAApC,GAAhB,EAFb,EAJF,GAXF,cAoBE,mCAAK,SAAS,CAAC,aAAf,wBACE,2BAAC,yBAAD,EAAQ,OAAO,CAAC,SAAhB,CAA0B,IAAI,CAAC,QAA/B,CAAwC,QAAQ,CAAER,OAAlD,UACGA,OAAO,CAAG,WAAH,CAAiB,OAD3B,EADF,cAIE,mCAJF,cAKE,uFAA+B,2BAAC,gCAAD,EAAM,EAAE,CAAC,WAAT,2BAA/B,GALF,GApBF,GAFF,GADF,EADF,CAmCD,CA1DM,C;;;;;;;;;;;;;;;;ACTQ,QAASoB,QAAT,MAA8B,IAAXnD,QAAW,MAAXA,OAAW,CAE3C,kBAAeT,iBAAY,EAA3B,CAAOlB,IAAP,eAAOA,IAAP,CACA,GAAM+E,KAAI,CAAGpD,OAAO,CAACqD,IAAR,GAAiBhF,IAAI,CAAC0C,QAAnC,CACA,GAAMuC,SAAQ,CAAG,CAACF,IAAlB,CAEA,mBACE,mCAAK,SAAS,CAAEG,oBAAU,CAAC,yBAAD,CAA4B,CACpD,UAAWH,IADyC,CAEpD,UAAWE,QAFyC,CAA5B,CAA1B,wBAkBE,kCAAK,SAAS,CAAEC,oBAAU,CAAC,0CAAD,CAA6C,CACrE,sBAAuBH,IAD8C,CAErE,sBAAuBE,QAF8C,CAA7C,CAA1B,uBAKE,gCAAG,SAAS,CAAEC,oBAAU,CAAC,CAAC,aAAcH,IAAf,CAAD,CAAxB,UAAkEpD,OAAO,CAACwD,OAA1E,EAAqDxD,OAAO,CAACyD,EAA7D,CALF,EAlBF,cAyBE,kCAAK,SAAS,CAAEF,oBAAU,CAAC,UAAD,CAAa,CACrC,WAAYH,IADyB,CAErC,aAAcE,QAFuB,CAAb,CAA1B,uBAII,2CAAItD,OAAO,CAACqD,IAAZ,MAAoBK,gBAAM,CAAC1D,OAAO,CAAC2D,SAAT,CAAN,CAA0BC,MAA1B,CAAiC,iBAAjC,CAApB,GAJJ,EAzBF,GADF,CAkCD,C;;8DCxCD,GAAMC,aAAY,CAAGjD,8BAAH,yNAAlB,CAQA,GAAMkD,aAAY,CAAGlD,8BAAH,qPAAlB,CAQA,GAAMmD,YAAW,CAAGnD,8BAAH,6LAAjB,CAOO,GAAMoD,kBAAQ,CAAG,QAAXA,SAAW,EAAM,CAC5B;AACA,qBAAmBvD,uBAAe,EAAlC,CAAQP,MAAR,kBAAQA,MAAR,CACA,GAAMZ,SAAQ,CAAGoB,0BAAkB,EAAnC,CACA,cAA8BI,yBAAQ,CAAC,EAAD,CAAtC,kEAAO0C,OAAP,eAAgBS,UAAhB,eAEA,GAAMC,cAAa,CAAGhE,MAAH,SAAGA,MAAH,iBAAGA,MAAM,CAAEiE,IAAR,CAAa,SAAA/D,KAAK,QAAIA,MAAK,CAACE,QAAN,GAAmB,IAAvB,EAAlB,CAAtB,CACA;AACA,GAAML,SAAQ,CAAGiE,aAAH,SAAGA,aAAH,iBAAGA,aAAa,CAAEjE,QAAhC,CACA;AAEA,qBAAmDmE,kDAAe,CAACL,WAAD,CAAlE,CAAcM,WAAd,kBAAQrC,IAAR,CAAkCsC,YAAlC,kBAA2BrC,KAA3B,CAEA,kBAAwEU,4CAAY,CAACkB,YAAD,CAApF,0EAAOU,WAAP,qDAA+BC,eAA/B,iBAAsBzC,OAAtB,CAAsD0C,YAAtD,iBAAgDzC,IAAhD,CAEA,iBAAsBT,0CAAW,CAACuC,YAAD,CAAe,CAC9CnG,OAAO,CAAE,iBAACiE,GAAD,QAAS9D,QAAO,CAACC,GAAR,CAAY6D,GAAZ,CAAT,EADqC,CAAf,CAAjC,wEAAO8C,WAAP,kBAIAC,0BAAS,CAAC,UAAM,CACd,GAAIL,YAAJ,CAAkBxG,OAAO,CAACC,GAAR,CAAYuG,YAAZ,EAClB,GAAID,WAAJ,CAAiB,CACf,GAAMrE,QAAO,CAAGqE,WAAW,CAACO,UAA5B,CACAtF,QAAQ,CAAC,CACPP,IAAI,CAAE,aADC,CACcE,OAAO,CAAE,CAC5Bc,SAAS,CAAEC,OAAO,CAAC6E,EADS,CAE5B7E,OAAO,CAAPA,OAF4B,CADvB,CAAD,CAAR,CAMD,CACF,CAXQ,CAWN,CAACsE,YAAD,CAAeD,WAAf,CAXM,CAAT,CAaAM,0BAAS,CAAC,UAAM,CACd,GAAIT,aAAa,EAAI,CAACA,aAAa,CAACjE,QAApC,CAA8C,CAC5CsE,WAAW,CAAC,CAAEpD,SAAS,CAAE,CAAE0D,EAAE,CAAEX,aAAa,CAACnE,SAApB,CAAb,CAAD,CAAX,CACD,CACF,CAJQ,CAIN,CAACmE,aAAD,CAJM,CAAT,CAMAS,0BAAS,CAAC,UAAM,CACd,GAAIF,YAAJ,CAAkB,CAChB3G,OAAO,CAACC,GAAR,CAAY,kBAAZ,CAAgC0G,YAAhC,EACAnF,QAAQ,CAAC,CACPP,IAAI,CAAE,oBADC,CACqBE,OAAO,CAAE,CACnCc,SAAS,CAAEmE,aAAa,CAACnE,SADU,CAEnCE,QAAQ,CAAEwE,YAAY,CAACF,WAFY,CAD9B,CAAD,CAAR,CAKD,CACF,CATQ,CASP,CAACE,YAAD,CATO,CAAT,CAWA,GAAMK,cAAa,CAAG,QAAhBA,cAAgB,CAACzC,CAAD,CAAO,CAC3BA,CAAC,CAACD,cAAF,GACA,GAAIoB,OAAO,CAACuB,IAAR,KAAmB,EAAnB,EAAyB,CAACb,aAA9B,CAA6C,OAC7CpG,OAAO,CAACC,GAAR,CAAY,gBAAZ,CAA8ByF,OAA9B,EACAS,UAAU,CAAC,EAAD,CAAV,CACA;AACAS,WAAW,CAAC,CACVvD,SAAS,CAAE,CACT0D,EAAE,CAAEX,aAAa,CAACnE,SADT,CAETyD,OAAO,CAAPA,OAFS,CADD,CAAD,CAAX,CAKD,CAXD,CAaA,GAAIwB,mBAAJ,CACA,GAAI,CAAC/E,QAAD,EAAa,CAACuE,eAAlB,CAAmC,CACjCQ,kBAAkB,cAAG,gCAAG,SAAS,CAAC,WAAb,6BAArB,CACD,CAFD,IAEO,IAAIR,eAAJ,CAAqB,CAC1BQ,kBAAkB,cAAG,gCAAG,SAAS,CAAC,WAAb,wBAArB,CACD,CAFM,IAEA,IAAI/E,QAAQ,CAACgF,MAAT,CAAkB,CAAtB,CAAyB,CAC9BD,kBAAkB,CAAG/E,QAAQ,CAACI,GAAT,CAAa,SAACL,OAAD,CAAUkF,KAAV,qBAChC,4BAAC,iBAAD,yBACE,2BAAC,OAAD,EAAS,OAAO,CAAElF,OAAlB,EADF,CAEGkF,KAAK,GAAKjF,QAAQ,CAACgF,MAAT,CAAkB,CAA5B,eACC,kCAAK,SAAS,CAAC,WAAf,uBACE,iCAAI,SAAS,CAAC,KAAd,EADF,EAHJ,GAAejF,OAAO,CAACyD,EAAvB,CADgC,EAAb,CAArB,CAUD,CAXM,IAWA,IAAIxD,QAAQ,CAACgF,MAAT,GAAoB,CAAxB,CAA2B,CAChCD,kBAAkB,cAAG,gCAAG,SAAS,CAAC,WAAb,4DAArB,CACD,CAED,GAAMG,KAAI,CAAG,QAAPA,KAAO,EAAM,CACjBrC,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAuB,GAAvB,CACD,CAFD,CAGA,mBACE,4BAAC,sBAAD,EAAK,EAAE,CAAE,EAAT,CAAa,EAAE,CAAE,CAAjB,CAAoB,SAAS,CAAC,cAA9B,wBACE,kCAAK,SAAS,CAAC,gCAAf,uBACE,2BAAC,yBAAD,EAAQ,OAAO,CAAC,gBAAhB,CAAiC,SAAS,CAAC,YAA3C,CACE,OAAO,CAAEmC,IADX,wBADF,EADF,cAME,kCAAK,SAAS,CAAC,kDAAf,UACGH,kBADH,EANF,cAUE,kCAAK,SAAS,CAAC,qBAAf,uBACE,2BAAC,uBAAD,EAAM,QAAQ,CAAEF,aAAhB,uBACE,4BAAC,uBAAD,CAAM,KAAN,EAAY,SAAS,CAAC,+BAAtB,wBACE,2BAAC,uBAAD,CAAM,OAAN,EAAc,IAAI,CAAC,MAAnB,CAA0B,SAAS,CAAC,yCAApC,CACE,WAAW,CAAC,mBADd,CACkC,KAAK,CAAEtB,OADzC,CAEE,QAAQ,CAAE,kBAACnB,CAAD,QAAO4B,WAAU,CAAC5B,CAAC,CAACC,MAAF,CAASC,KAAV,CAAjB,EAFZ,EADF,cAIE,gCAAG,SAAS,CAAC,4CAAb,CACE,IAAI,CAAC,QADP,CAEE,OAAO,CAAEuC,aAFX,EAJF,GADF,EADF,EAVF,GADF,CAyBD,CA9GM,C;;6CCpBP,GAAMM,gBAAe,CAAGxE,8BAAH,qJAArB,CAMA,GAAMyE,WAAU,CAAGzE,8BAAH,yNAAhB,CAOO,GAAM0E,UAAI,CAAG,QAAPA,KAAO,EAAM,kBACxB,GAAM5C,aAAY,CAAGjD,oBAAe,EAApC,CACA;AACA,GAAMH,SAAQ,CAAGoB,0BAAkB,EAAnC,CACA,qBAAmBD,uBAAe,EAAlC,CAAQP,MAAR,kBAAQA,MAAR,CACA,GAAMgE,cAAa,CAAGhE,MAAH,SAAGA,MAAH,+BAAGA,MAAM,CAAEiE,IAAR,CAAa,SAAA/D,KAAK,QAAIA,MAAK,CAACE,QAAN,GAAmB,IAAvB,EAAlB,CAAH,uCAAG,aAAgDP,SAAtE,CACA,cAA8Be,yBAAQ,CAAC,KAAD,CAAtC,kEAAOyE,OAAP,eAAgBC,UAAhB,eACA,eAAsC1E,yBAAQ,CAAC,CAAD,CAA9C,mEAAO2E,WAAP,eAAoBC,cAApB,eACA,eAAsC5E,yBAAQ,CAAC,CAAD,CAA9C,mEAAO6E,WAAP,eAAoBC,cAApB,eACA;AACA,GAAIC,YAAW,CAAG,EAAlB,CACA;AAEA;AACA;AACA;AACA;AACA;AAEA,kBAAwBlD,4CAAY,CAACyC,eAAD,CAAkB,CACpDzH,OAAO,CAAE,iBAACiE,GAAD,QAAS9D,QAAO,CAACC,GAAR,CAAY,SAAZ,CAAuB6D,GAAvB,CAAT,EAD2C,CAEpDgB,WAAW,CAAE,qBAACZ,IAAD,CAAU,CACrBlE,OAAO,CAACC,GAAR,CAAY,SAAZ,CAAuBiE,IAAvB,EACA4D,cAAc,CAAC5D,IAAI,CAAC8D,aAAN,CAAd,CACD,CALmD,CAAlB,CAApC,0EAAOA,aAAP,mBAUA,iBAAiCvE,0CAAW,CAAC8D,UAAD,CAAa,CACvD1H,OAAO,CAAE,iBAACiE,GAAD,QAAS9D,QAAO,CAACC,GAAR,CAAY6D,GAAZ,CAAT,EAD8C,CAEvDgB,WAAW,CAAE,qBAACZ,IAAD,QAAU1C,SAAQ,CAAC,CAAEP,IAAI,CAAE,YAAR,CAAsBE,OAAO,CAAE+C,IAAI,CAAC+D,SAApC,CAAD,CAAlB,EAF0C,CAAb,CAA5C,wEAAOA,SAAP,kBAAoBhE,OAApB,kBAAoBA,OAApB,CAKA,GAAI4D,WAAW,CAAG,CAAlB,CAAqB,CACnB,IAAK,GAAIK,EAAC,CAAG,CAAb,CAAgBA,CAAC,EAAIC,IAAI,CAACC,IAAL,CAAUP,WAAW,CAAG,CAAxB,CAArB,CAAiDK,CAAC,EAAlD,CAAqD,CACnDH,WAAW,CAAClE,IAAZ,CAAiBqE,CAAjB,EACD,CACF,CAGDrB,0BAAS,CAAC,UAAM,CACdmB,aAAa,GACbhI,OAAO,CAACC,GAAR,CAAY,gBAAZ,CAA8B4H,WAA9B,EACAI,SAAS,CAAC,CACR5E,SAAS,CAAE,CACTgF,IAAI,CAAEV,WADG,CADH,CAAD,CAAT,CAKD,CARQ,CAQN,CAACA,WAAD,CAAcE,WAAd,CAA2BG,aAA3B,CAA0CC,SAA1C,CARM,CAAT,CAUA,GAAIK,aAAJ,CACA,GAAI,CAAClG,MAAD,EAAW6B,OAAf,CAAwB,CACtBqE,YAAY,cAAG,sDAAf,CACD,CAFD,IAEO,IAAIlG,MAAM,CAAC+E,MAAP,GAAkB,CAAtB,CAAyB,CAC9BmB,YAAY,cAAG,kEAAf,CACD,CAFM,IAEA,IAAIlG,MAAM,CAAC+E,MAAP,CAAgB,CAApB,CAAuB,CAC5BmB,YAAY,CAAGlG,MAAM,CAACG,GAAP,CAAW,SAAAD,KAAK,CAAI,CACjC,GAAME,SAAQ,CAAG4D,aAAa,GAAK9D,KAAK,CAACL,SAAzC,CACA,mBACE,2BAAC,sBAAD,EAAK,EAAE,CAAE,EAAT,CAAa,EAAE,CAAE,CAAjB,CAAoB,EAAE,CAAE,CAAxB,CAA2B,SAAS,CAAC,cAArC,uBACA,4BAAC,uBAAD,EAAM,SAAS,CAAC,kBAAhB,wBAEE,4BAAC,uBAAD,CAAM,IAAN,yBACE,2BAAC,uBAAD,CAAM,KAAN,EAAY,SAAS,CAAC,gBAAtB,UACGK,KAAK,CAACL,SADT,EADF,cAKE,2BAAC,uBAAD,CAAM,IAAN,EAAW,SAAS,CAAC,iBAArB,UACGK,KAAK,CAACiG,SADT,EALF,cASE,2BAAC,yBAAD,EAAQ,OAAO,CAAC,SAAhB,CACE,SAAS,CAAE9C,oBAAU,CAAC,MAAD,CAAQ,CAAE,cAAejD,QAAjB,CAAR,CADvB,CAEI,OAAO,CAAE,kBAAM,CACbhB,QAAQ,CAAC,CAAEP,IAAI,CAAE,oBAAR,CAA8BE,OAAO,CAAEmB,KAAK,CAACL,SAA7C,CAAD,CAAR,CACAyF,UAAU,CAAC,IAAD,CAAV,CACC,CALP,yBATF,GAFF,cAqBE,4BAAC,uBAAD,CAAM,MAAN,EAAa,SAAS,CAAC,YAAvB,uBACY9B,gBAAM,CAACtD,KAAK,CAACuD,SAAP,CAAN,CAAwBC,MAAxB,CAA+B,uBAA/B,CADZ,GArBF,GADA,EAAyDxD,KAAK,CAACL,SAA/D,CADF,CA6BD,CA/Bc,CAAf,CAgCD,CAED,GAAMuG,OAAM,CAAG,QAATA,OAAS,EAAM,CACnB5D,YAAY,CAAC,CAAE3D,IAAI,CAAE,QAAR,CAAD,CAAZ,CACA+D,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAuB,QAAvB,CACD,CAHD,CAKA,GAAMuD,SAAQ,CAAG,QAAXA,SAAW,CAACC,UAAD,CAAgB,CAC/B1I,OAAO,CAACC,GAAR,CAAY,wBAAZ,CAAsCyI,UAAtC,EACAd,cAAc,CAACc,UAAD,CAAd,CACD,CAHD,CAIA,mBACE,4BAAC,iBAAD,yBACE,2BAAC,sBAAD,EAAK,SAAS,CAAC,kCAAf,uBACE,2BAAC,sBAAD,EAAK,SAAS,CAAC,UAAf,uBACE,2BAAC,yBAAD,EAAQ,OAAO,CAAC,MAAhB,CAAuB,SAAS,CAAC,gCAAjC,CACE,OAAO,CAAEF,MADX,oBADF,EADF,EADF,cAOE,2BAAC,sBAAD,WACGf,OAAO,GAAK,KAAZ,CAAoBa,YAApB,cAAmC,2BAAC,iBAAD,IADtC,EAPF,cAWE,2CACGb,OAAO,GAAK,KAAZ,cACC,iCAAI,SAAS,CAAC,gCAAd,UACDM,WAAW,CAACxF,GAAZ,CAAgB,SAAA8F,IAAI,qBACnB,iCAAI,SAAS,CAAC,WAAd,uBAEE,2BAAC,yBAAD,EAAQ,OAAO,CAAC,MAAhB,CAAuB,SAAS,CAAC,WAAjC,CAA6C,OAAO,CAAE,yBAAMI,SAAQ,CAACJ,IAAD,CAAd,EAAtD,UACGA,IADH,EAFF,EAA+BA,IAA/B,CADmB,EAApB,CADC,EADD,CAWG,EAZN,EAXF,GADF,CA6BD,CAjIM,C;;AClBQ,QAASM,mBAAT,CAA4BxI,KAA5B,CAAmC,CAChD,kBAAiBsB,iBAAY,EAA7B,CAAQlB,IAAR,eAAQA,IAAR,CACA,GAAIJ,KAAK,CAACyI,aAAN,EAAuB,CAACrI,IAA5B,CAAkC,CAChC,mBAAO,2BAAC,gCAAD,EAAU,EAAE,CAAC,QAAb,EAAP,CACD,CAFD,IAEO,IAAIJ,KAAK,CAAC0I,KAAN,EAAetI,IAAnB,CAAyB,CAC9B,mBAAO,2BAAC,gCAAD,EAAU,EAAE,CAAC,GAAb,EAAP,CACD,CAFM,IAEA,CACL,mBAAO,2BAAC,6BAAD,2CAAO,SAAS,CAAEJ,KAAK,CAAC2I,SAAxB,EAAuC3I,KAAvC,EAAP,CACD,CACF,C;;ACDD,QAAS4I,QAAT,EAAe,CACb,mBACE,2BAAC,6BAAD,wBACE,2BAAC,iBAAD,wBACE,2BAAC,uBAAD,wBACE,2BAAC,yCAAD,wBACE,2BAAC,4BAAD,EAAW,SAAS,CAAC,MAArB,uBACE,4BAAC,8BAAD,yBACE,2BAAC,kBAAD,EAAoB,KAAK,KAAzB,CAA0B,IAAI,CAAC,GAA/B,CAAmC,SAAS,CAAEvB,SAA9C,CAAoD,aAAa,KAAjE,EADF,cAEE,2BAAC,kBAAD,EAAoB,IAAI,CAAC,OAAzB,CAAiC,SAAS,CAAEtB,iBAA5C,CAAsD,aAAa,KAAnE,EAFF,cAGE,2BAAC,kBAAD,EAAoB,IAAI,CAAC,WAAzB,CAAqC,SAAS,CAAEnD,iBAAhD,CAA0D,KAAK,KAA/D,EAHF,cAIE,2BAAC,kBAAD,EAAoB,IAAI,CAAC,QAAzB,CAAkC,SAAS,CAAE4B,WAA7C,CAAoD,KAAK,KAAzD,EAJF,GADF,EADF,EADF,EADF,EADF,EADF,CAkBD,CAEcoE,mDAAf,E;;AC7BAC,mBAAQ,CAACC,MAAT,cACE,2BAAC,eAAD,CAAO,UAAP,wBACE,2BAAC,OAAD,IADF,EADF,CAIEC,QAAQ,CAACC,cAAT,CAAwB,MAAxB,CAJF,E;;;;;;;ACJA,uC","file":"x","sourcesContent":["import {\n  ApolloClient,\n  InMemoryCache,\n  ApolloProvider as Provider,\n  createHttpLink,\n  split\n} from \"@apollo/client\"\n\nimport { setContext } from '@apollo/client/link/context'\nimport { WebSocketLink } from '@apollo/client/link/ws'\nimport { getMainDefinition } from '@apollo/client/utilities'\n\nlet httpLink = createHttpLink({\n  uri: 'https://group-chat-app-div.herokuapp.com/graphql',\n});\n\n// the setContext will set the header for all request\n// if token changes, it sets new token\nconst authLink = setContext((_, { headers }) => {\n  // get the authentication token from local storage if it exists\n  const token = localStorage.getItem('token');\n  // return the headers to the context so httpLink can read them\n  return {\n    headers: {\n      ...headers,\n      authorization: token ? `Bearer ${token}` : \"\",\n    }\n  }\n})\n\nhttpLink = authLink.concat(httpLink)\n\nconst wsLink = new WebSocketLink({\n  uri: 'wss://group-chat-app-div.herokuapp.com/subscriptions',\n  options: {\n    reconnect: true,\n    connectionParams: {\n      Authorization: `Bearer ${localStorage.getItem('token')}`\n    }\n  }\n})\n\nconst splitLink = split(\n  ({ query }) => {\n    const definition = getMainDefinition(query);\n    return (\n      definition.kind === 'OperationDefinition' &&\n      definition.operation === 'subscription'\n    )\n  },\n  wsLink,\n  httpLink,\n)\n\nconst client = new ApolloClient({\n  link: splitLink,\n  cache: new InMemoryCache(),\n  onError: ({ networkError, graphQLErrors }) => {\n    console.log('graphQLErrors', graphQLErrors)\n    console.log('networkError', networkError)\n  }\n})\n\nexport default function ApolloProvider(props) {\n  return <Provider client={client} {...props} />\n}","import React, { createContext, useContext, useReducer } from 'react'\nimport jwtDecode from 'jwt-decode'\n\nconst AuthStateContext = createContext()\nconst AuthDispatchContext = createContext()\n\nlet user = null\nconst token = localStorage.getItem('token')\nif (token) {\n  const decodedToken = jwtDecode(token)\n  // since we have expiry value 'exp' in the token payload, we need to check is login is expired\n  const expiresAt = new Date(decodedToken.exp * 1000) \n  console.log('expiry ', expiresAt)\n  if (new Date() > expiresAt) {\n    localStorage.removeItem('token')\n  }\n  else {\n    user = decodedToken\n  }\n}\nelse {\n  console.log('no token found')\n}\n\nconst authReducer = (state, action) => {\n  switch (action.type) {\n    case 'LOGIN':\n      localStorage.setItem('token', action.payload.token)\n      return {\n        ...state,\n        user: action.payload\n      }\n    case 'LOGOUT':\n      localStorage.removeItem('token')\n      return {\n        ...state,\n        user: null\n      }\n    default:\n      throw new Error(`Unknown action type: ${action.type}`)\n  }\n}\n\nexport const AuthProvider = ({ children }) => {\n  const [state, dispatch] = useReducer(authReducer, { user })\n  return (\n    <AuthDispatchContext.Provider value={dispatch}>\n      <AuthStateContext.Provider value={state}>\n        {children}\n      </AuthStateContext.Provider>\n    </AuthDispatchContext.Provider>\n  )\n}\n\nexport const useAuthState = () => useContext(AuthStateContext)\nexport const useAuthDispatch = () => useContext(AuthDispatchContext)","import React, { createContext, useContext, useReducer } from 'react'\n\nconst MessageStateContext = createContext()\nconst MessageDispatchContext = createContext()\n\nconst messageReducer = (state, action) => {\n  let groupsCopy, groupIndex\n  const { groupname, message, messages } = action.payload\n  switch (action.type) {\n    case 'SET_GROUPS':\n      return {\n        ...state,\n        groups: action.payload\n      }\n    case 'SET_GROUP_MESSAGES':\n      groupsCopy = [...state.groups]\n      groupIndex = groupsCopy.findIndex(group => group.groupname === groupname)\n      groupsCopy[groupIndex] = {...groupsCopy[groupIndex], messages}\n      return {\n        ...state,\n        groups: groupsCopy\n      }\n    case 'SET_SELECTED_GROUP':\n      groupsCopy = state.groups.map(group => ({\n        ...group,\n        selected: group.groupname === action.payload\n      }))\n      return {\n        ...state,\n        groups: groupsCopy\n      }\n    case 'ADD_MESSAGE':\n      groupsCopy = [...state.groups]\n      groupIndex = groupsCopy.findIndex(group => group.groupname === groupname)\n      let newGroup = {\n        ...groupsCopy[groupIndex],\n        messages: groupsCopy[groupIndex].messages\n          ? [message, ...groupsCopy[groupIndex].messages]\n          : null\n      }\n      groupsCopy[groupIndex] = newGroup\n      console.log('new group : ', newGroup)\n      return {\n        ...state,\n        groups: groupsCopy\n      }\n  }\n}\nexport const MessageProvider = ({ children }) => {\n  const [state, dispatch] = useReducer(messageReducer, { groups: null })\n  return (\n    <MessageDispatchContext.Provider value={dispatch}>\n      <MessageStateContext.Provider value={state}>\n        {children}\n      </MessageStateContext.Provider>\n    </MessageDispatchContext.Provider>\n  )\n}\n\nexport const useMessageState = () => useContext(MessageStateContext)\nexport const useMessageDispatch = () => useContext(MessageDispatchContext)","import React, { useState } from 'react'\nimport { gql, useMutation } from '@apollo/client'\nimport { Row, Col, Form, Button } from 'react-bootstrap'\nimport { Link } from 'react-router-dom'\n\nconst REGISTER_USER = gql`\n  mutation register($username: String! $email: String! $password: String! $confirmPassword: String!){\n    register(username: $username email: $email password: $password confirmPassword: $confirmPassword){\n      username createdAt\n    }\n  }\n`;\nexport const Register = (props) => {\n\n  const [variables, setVariables] = useState({\n    username: '',\n    email: '',\n    password: '',\n    confirmPassword: ''\n  })\n\n  const [errors, setErrors] = useState({})\n\n  const [registerUser, { loading, data, error }] = useMutation(REGISTER_USER, {\n\n    // Redirect to login page when registered\n    update: (cache, res) => props.history.push('/login'),\n    // Handle error\n    onError: (err) => {\n      // console.log('errors - seterrors : ', errors)\n      // console.log('ERROR : ', error)\n      // console.log('DATA : ', data)\n      // console.log('onerror: ', err)\n      // console.log('object: ', err.networkError.result.errors)\n      // console.log('json: ', JSON.stringify(err))\n      // console.log('err ', err)\n      console.log('err: ', err.graphQLErrors[0].extensions.errors)\n      setErrors(err.graphQLErrors[0].extensions.errors)\n    }\n  })\n\n  const submitRegistrationForm = (event) => {\n    event.preventDefault()\n    console.log('variables: ', variables)\n    registerUser({ variables })\n  }\n\n  return (\n    <Row className=\"bg-white rounded-3 py-5 justify-content-center\">\n      <Col sm={8} md={6} lg={4}>\n        \n        {/* HEADING */}\n        <h1 className=\"text-center\">REGISTER</h1>\n\n        {/* FORM STARTS */}\n        <Form onSubmit={submitRegistrationForm}>\n          \n          <Form.Group className=\"mb-3\">\n            <Form.Label className={errors.email && 'text-danger'}>\n              {errors.email ?? 'Email address'}\n            </Form.Label>\n            <Form.Control type=\"email\"\n              value={variables.email} className={errors.email && 'is-invalid'}\n              onChange={e => setVariables({ ...variables, email: e.target.value })} />\n          </Form.Group>\n\n          <Form.Group className=\"mb-3\">\n            <Form.Label className={errors.username && 'text-danger'}>\n              {errors.username ?? 'Username'}\n            </Form.Label>\n            <Form.Control type=\"text\"\n              value={variables.username} className={errors.username && 'is-invalid'}\n              onChange={e => setVariables({ ...variables, username: e.target.value })} />\n          </Form.Group>\n\n          <Form.Group className=\"mb-3\">\n            <Form.Label className={errors.password && 'text-danger'}>\n              {errors.password ?? 'Password'}\n            </Form.Label>\n            <Form.Control type=\"password\"\n              value={variables.password} className={errors.password && 'is-invalid'}\n              onChange={e => setVariables({ ...variables, password: e.target.value })} />\n          </Form.Group>\n\n          <Form.Group className=\"mb-3\">\n            <Form.Label className={errors.confirmPassword && 'text-danger'}>\n              {errors.confirmPassword ?? 'Confirm Password'}\n            </Form.Label>\n            <Form.Control type=\"password\"\n              value={variables.confirmPassword} className={errors.confirmPassword && 'is-invalid'}\n              onChange={e => setVariables({ ...variables, confirmPassword: e.target.value })} />\n          </Form.Group>\n  \n          <div className=\"text-center\">\n            <Button variant=\"success\" type=\"submit\" disabled={loading}>\n              {loading ? 'loading..' : 'Register'}\n            </Button>\n            <br />\n            <small>Already have an account ? <Link to=\"/login\">Login</Link></small>\n          </div>\n\n        </Form>\n        {/* FORM ENDS */}\n\n      </Col>\n    </Row>\n  )\n}\n","import React, { useState } from 'react'\nimport { gql, useLazyQuery } from '@apollo/client'\nimport { useAuthDispatch } from '../context/auth'\nimport { Row, Col, Form, Button } from 'react-bootstrap'\nimport { Link } from 'react-router-dom'\n\nconst LOGIN_USER = gql`\n  query login($username: String! $password: String!) {\n    login(username: $username password: $password) {\n      username\n      token\n      createdAt\n    }\n  }\n`\nexport const Login = () => {\n  const [variables, setVariables] = useState({\n    username: '',\n    password: '',\n  })\n  const [errors, setErrors] = useState({})\n\n  const authDispatch = useAuthDispatch()\n\n  const [loginUser, { loading, data, error }] = useLazyQuery(LOGIN_USER, {\n    onError: (err) => setErrors(err.graphQLErrors[0].extensions.errors),\n    onCompleted: (data) => {\n      // we are now setting data in context auth\n      authDispatch({ type: 'LOGIN', payload: data.login })\n      window.location.href = '/'\n    }\n  })\n\n  const submitLoginForm = (event) => {\n    event.preventDefault()\n    console.log('Variables: ', variables)\n    loginUser({ variables })\n  }\n  return (\n    <Row className=\"bg-white rounded-3 py-5 justify-content-center\">\n      <Col sm={8} md={6} lg={4}>\n        <h1 className=\"text-center\">Login</h1>\n        <Form onSubmit={submitLoginForm}>\n\n          <Form.Group className=\"mb-3\">\n            <Form.Label className={errors.username && 'text-danger'}>\n              {errors.username ?? 'Username'}\n            </Form.Label>\n            <Form.Control type=\"text\" placeholder=\"Enter user name\"\n              value={variables.username} className={errors.username && 'is-invalid'}\n              onChange={e => setVariables({ ...variables, username: e.target.value })} />\n          </Form.Group>\n\n          <Form.Group className=\"mb-3\">\n            <Form.Label className={errors.password && 'text-danger'}>\n              {errors.password ?? 'Password'}\n            </Form.Label>\n            <Form.Control type=\"password\" placeholder=\"Enter password\"\n              value={variables.password} className={errors.password && 'is-invalid'}\n              onChange={e => setVariables({ ...variables, password: e.target.value })} />\n          </Form.Group>\n\n          <div className=\"text-center\">\n            <Button variant=\"success\" type=\"submit\" disabled={loading}>\n              {loading ? 'loading..' : 'Login'}\n            </Button>\n            <br />\n            <small>Don't have an account ? <Link to=\"/register\">Register here</Link></small>\n          </div>\n        </Form>\n      </Col>\n    </Row>\n  )\n}\n","import React, {useState} from 'react'\nimport { useAuthState } from '../context/auth'\nimport classNames from 'classnames'\nimport moment from 'moment'\nimport { OverlayTrigger, Tooltip } from 'react-bootstrap'\n\nexport default function Message({ message }) {\n  \n  const {user} = useAuthState()\n  const sent = message.from === user.username\n  const received = !sent\n \n  return (\n    <div className={classNames('d-flex flex-column my-1', {\n      'ms-auto': sent,\n      'me-auto': received\n    })}>\n    {/* <OverlayTrigger\n      placement={'top'}\n      overlay={\n        <Tooltip>\n          {moment(message.createdAt).format('MMM DD, YYYY @ h:mm a')}\n        </Tooltip>\n      }\n      transition={false}>\n      \n      \n        \n      \n\n      </OverlayTrigger> */}\n      <div className={classNames('position-relative pt-3 px-3 rounded-pill', {\n        'bg-primary text-end': sent,\n        'bg-light text-start': received\n      })}>\n\n        <p className={classNames({'text-white': sent})} key={message.id}>{message.content}</p>\n      </div>\n      <div className={classNames('text-end', {\n        'text-end': sent,\n        'text-start': received\n      })}>\n          <p>{message.from}: {moment(message.createdAt).format('DD MMM @ h:mm a')}</p>\n      </div>\n    </div>\n  )\n}\n","import React, { useEffect, Fragment, useState } from 'react'\nimport { Col, Form, Button } from 'react-bootstrap'\nimport { gql, useLazyQuery, useMutation, useSubscription } from '@apollo/client'\nimport { useMessageDispatch, useMessageState } from '../context/message'\nimport Message from './Message'\n\nconst GET_MESSAGES = gql`\n  query getMessages($to: String!){\n    getMessages(to: $to){\n      content from to createdAt\n    }\n  }\n`\n\nconst SEND_MESSAGE = gql`\n  mutation sendMessage($to: String! $content: String!){\n    sendMessage(to: $to content: $content){\n      id content from to createdAt\n    }\n  }\n`\n\nconst NEW_MESSAGE = gql`\n  subscription newMessage {\n    newMessage{\n      id from content to createdAt\n    }\n  }\n`\nexport const Chatroom = () => {\n  // const { user } = useAuthState()\n  const { groups } = useMessageState()\n  const dispatch = useMessageDispatch()\n  const [content, setContent] = useState('')\n\n  const selectedGroup = groups?.find(group => group.selected === true)\n  // console.log('selected group : ', selectedGroup)\n  const messages = selectedGroup?.messages\n  // console.log('messages: ', messages)\n\n  const { data: messageData, error: messageError } = useSubscription(NEW_MESSAGE)\n\n  const [getMessages, { loading: messagesLoading, data: messagesData }] = useLazyQuery(GET_MESSAGES)\n\n  const [sendMessage] = useMutation(SEND_MESSAGE, {\n    onError: (err) => console.log(err),  \n  })\n\n  useEffect(() => {\n    if (messageError) console.log(messageError)\n    if (messageData) {\n      const message = messageData.newMessage\n      dispatch({\n        type: 'ADD_MESSAGE', payload: {\n          groupname: message.to,\n          message\n        }\n     })\n    }\n  }, [messageError, messageData])\n\n  useEffect(() => {\n    if (selectedGroup && !selectedGroup.messages) {\n      getMessages({ variables: { to: selectedGroup.groupname } })\n    }\n  }, [selectedGroup])\n\n  useEffect(() => {\n    if (messagesData) {\n      console.log('messages Data : ', messagesData)\n      dispatch({\n        type: 'SET_GROUP_MESSAGES', payload: {\n          groupname: selectedGroup.groupname,\n          messages: messagesData.getMessages\n      } })\n    }\n  },[messagesData])\n\n  const submitMessage = (e) => {\n    e.preventDefault()\n    if (content.trim() === '' || !selectedGroup) return\n    console.log('send message: ', content)\n    setContent('')\n    //mutation for sending a message\n    sendMessage({\n      variables: {\n        to: selectedGroup.groupname,\n        content\n    }})\n  }\n\n  let selectedChatMarkup\n  if (!messages && !messagesLoading) {\n    selectedChatMarkup = <p className=\"info-text\">Select a friend</p>\n  } else if (messagesLoading) {\n    selectedChatMarkup = <p className=\"info-text\">loading...</p>\n  } else if (messages.length > 0) {\n    selectedChatMarkup = messages.map((message, index) => (\n      <Fragment key={message.id}>\n        <Message message={message} />\n        {index === messages.length - 1 && (\n          <div className=\"invisible\">\n            <hr className=\"m-0\"/>\n          </div>\n        )}\n      </Fragment>\n    ))\n  } else if (messages.length === 0) {\n    selectedChatMarkup = <p className=\"info-text\">You are now connected! send your first message</p>\n  }\n\n  const home = () => {\n    window.location.href = '/'\n  }\n  return (\n    <Col xs={10} md={8} className=\"chat-box p-2\">\n      <div className=\"d-flex justify-content-end m-3\">\n        <Button variant=\"outline-danger\" className=\"leave-room\"\n          onClick={home}>Leave Room</Button>\n      </div>\n\n      <div className=\"messages-box d-flex flex-column-reverse my-3 p-3\">\n        {selectedChatMarkup}\n      </div>\n      \n      <div className=\"px-3 py-2 mb-3 mt-2\">\n        <Form onSubmit={submitMessage}>\n          <Form.Group className=\"d-flex align-items-center m-0\">\n            <Form.Control type=\"text\" className=\"message-input rounded-pill p-3 border-0\"\n              placeholder=\"Type a message...\" value={content}\n              onChange={(e) => setContent(e.target.value)} />\n            <i className=\"fas fa-paper-plane fa-2x text-primary ms-2\"\n              role=\"button\"\n              onClick={submitMessage}></i>\n          </Form.Group>\n        </Form>\n      </div>\n    </Col>\n  )\n}","import React, { Fragment, useState, useEffect } from 'react'\nimport { gql, useLazyQuery, useMutation } from '@apollo/client'\nimport { useAuthDispatch, useAuthState } from '../context/auth'\nimport { useMessageState, useMessageDispatch } from '../context/message'\nimport { Row, Col, Button, Card } from 'react-bootstrap'\nimport classNames from 'classnames'\nimport moment from 'moment'\nimport { Chatroom } from './Chatroom'\n\nconst GET_GROUP_COUNT = gql`\n  query getGroupCount{\n    getGroupCount\n  }\n`\n\nconst GET_GROUPS = gql`\n  mutation getGroups($page: Int!){\n    getGroups(page: $page){\n      groupname groupdesc createdAt\n    }\n  }\n`\nexport const Home = () => {\n  const authDispatch = useAuthDispatch()\n  // const { user } = useAuthState()\n  const dispatch = useMessageDispatch()\n  const { groups } = useMessageState()\n  const selectedGroup = groups?.find(group => group.selected === true)?.groupname\n  const [clicked, setClicked] = useState(false)\n  const [currentPage, setCurrentPage] = useState(1)\n  const [totalGroups, setTotalGroups] = useState(0)\n  // const [totalPages, setTotalPages] = useState([])\n  let pageNumbers = []\n  // const [groups, setGroups] = useState([])\n\n  // const [getGroups, { loading, data, error }] = useLazyQuery(GET_GROUPS)\n  // const { loading } = useMutation(GET_GROUPS, {\n  //   onCompleted: (data) => dispatch({ type: 'SET_GROUPS', payload: data.getGroups }),\n  //   onError: (err) => console.log('error in query: ', err)\n  // })\n\n  const [getGroupCount] = useLazyQuery(GET_GROUP_COUNT, {\n    onError: (err) => console.log('errrrrr', err),\n    onCompleted: (data) => {\n      console.log('count: ', data)\n      setTotalGroups(data.getGroupCount)\n    }\n  })\n\n  \n\n  const [getGroups, { loading }] = useMutation(GET_GROUPS, {\n    onError: (err) => console.log(err),\n    onCompleted: (data) => dispatch({ type: 'SET_GROUPS', payload: data.getGroups })\n  })\n\n  if (totalGroups > 0) {\n    for (let i = 1; i <= Math.ceil(totalGroups / 3); i++){\n      pageNumbers.push(i)\n    }\n  }\n  \n  \n  useEffect(() => {\n    getGroupCount()\n    console.log('total groups: ', totalGroups)\n    getGroups({\n      variables: {\n        page: currentPage\n      }\n    })\n  }, [currentPage, totalGroups, getGroupCount, getGroups])\n\n  let groupsMarkup\n  if (!groups || loading) {\n    groupsMarkup = <p>loading..</p>\n  } else if (groups.length === 0) {\n    groupsMarkup = <p>no groups created yet</p>\n  } else if (groups.length > 0) {\n    groupsMarkup = groups.map(group => {\n      const selected = selectedGroup === group.groupname\n      return (\n        <Col sm={12} md={6} lg={4} className=\"my-2 mx-auto\" key={group.groupname}>\n        <Card className=\"text-center pt-1\">\n          {/* <Card.Header>Featured</Card.Header> */}\n          <Card.Body>\n            <Card.Title className=\"text-uppercase\">\n              {group.groupname}\n              {/* title */}\n            </Card.Title>\n            <Card.Text className=\"text-capitalize\">\n              {group.groupdesc}\n              {/* text */}\n            </Card.Text>\n            <Button variant=\"primary\"\n              className={classNames(\"mb-3\",{ 'btn-warning': selected })}\n                onClick={() => {\n                  dispatch({ type: 'SET_SELECTED_GROUP', payload: group.groupname })\n                  setClicked(true)\n                  }\n                }>\n                Enter group\n              </Button>\n          </Card.Body>\n          <Card.Footer className=\"text-muted\">\n            Created: {moment(group.createdAt).format('MMM DD, YYYY @ h:mm a')}\n            {/* footer */}\n          </Card.Footer>\n        </Card></Col>\n      )\n    })\n  }\n  \n  const logout = () => {\n    authDispatch({ type: 'LOGOUT' })\n    window.location.href = '/login'\n  }\n\n  const paginate = (pageNumber) => {\n    console.log('selected page number: ', pageNumber)\n    setCurrentPage(pageNumber)\n  }\n  return (\n    <Fragment>\n      <Row className=\"justify-content-end mx-auto mb-3\">\n        <Col className=\"text-end\">\n          <Button variant=\"link\" className=\"btn-light text-decoration-none\"\n            onClick={logout}>Logout</Button>\n        </Col>\n      </Row>\n      <Row>\n        {clicked === false ? groupsMarkup : <Chatroom />}\n      </Row>\n      \n      <nav>\n        {clicked === false ? (\n          <ul className=\"pagination justify-content-end\">\n        {pageNumbers.map(page => (\n          <li className=\"page-item\" key={page}>\n            {/* <a onClick={() => paginate(page)} href=\"#\" className=\"page-link\">{page}</a> */}\n            <Button variant=\"link\" className=\"page-link\" onClick={() => paginate(page)}>\n              {page}\n            </Button>\n          </li>\n        ))}\n      </ul>\n        ) : ''}\n      </nav>\n      \n    </Fragment>\n  )\n}\n","import React from 'react'\nimport { useAuthState } from '../context/auth'\nimport { Route, Redirect } from 'react-router-dom'\n\nexport default function AuthRouteComponent(props) {\n  const { user } = useAuthState()\n  if (props.authenticated && !user) {\n    return <Redirect to=\"/login\" />\n  } else if (props.guest && user) {\n    return <Redirect to=\"/\" />\n  } else {\n    return <Route component={props.component} {...props} />\n  }\n}","import './App.scss'\nimport ApolloProvider from './ApolloProvider'\nimport { AuthProvider } from './context/auth'\nimport { MessageProvider } from './context/message'\nimport { BrowserRouter, Switch } from 'react-router-dom'\nimport { Container } from 'react-bootstrap'\nimport { Register } from './pages/Register'\nimport { Login } from './pages/Login'\nimport { Home } from './pages/Home'\nimport AuthRouteComponent from './components/AuthRouteComponent'\nimport { Chatroom } from './pages/Chatroom'\n\nfunction App() {\n  return (\n    <ApolloProvider>\n      <AuthProvider>\n        <MessageProvider>\n          <BrowserRouter>\n            <Container className=\"pt-5\">\n              <Switch>\n                <AuthRouteComponent exact path=\"/\" component={Home} authenticated />\n                <AuthRouteComponent path=\"/chat\" component={Chatroom} authenticated />\n                <AuthRouteComponent path=\"/register\" component={Register} guest />\n                <AuthRouteComponent path=\"/login\" component={Login} guest />\n              </Switch>\n            </Container>\n          </BrowserRouter>\n        </MessageProvider>\n      </AuthProvider>\n    </ApolloProvider>\n  )\n}\n\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n)","// extracted by mini-css-extract-plugin"]}}