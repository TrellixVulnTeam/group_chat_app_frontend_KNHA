{"ast":null,"code":"var _jsxFileName = \"/Users/divyanshisaxena/Desktop/divyanshi/learning/gql/group-chat-app/client/src/context/message.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$();\n\nimport React, { createContext, useContext, useReducer } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MessageStateContext = /*#__PURE__*/createContext();\nconst MessageDispatchContext = /*#__PURE__*/createContext();\n\nconst messageReducer = (state, action) => {\n  // let usersCopy, userIndex\n  let groupsCopy; // const { username, message, messages } = action.payload\n\n  switch (action.type) {\n    case 'SET_GROUPS':\n      return { ...state,\n        groups: action.payload\n      };\n\n    case 'SET_GROUP_MESSAGES':\n      groupsCopy = [...state.groups];\n      groupIndex = groupsCopy.findIndex(group => group.groupname === groupname);\n      groupsCopy[groupIndex] = { ...groupsCopy[groupIndex],\n        messages\n      };\n      return { ...state,\n        groups: groupsCopy\n      };\n\n    case 'SET_SELECTED_GROUP':\n      groupsCopy = state.groups.map(group => ({ ...group,\n        selected: group.groupname === action.payload\n      }));\n      return { ...state,\n        groups: groupsCopy\n      };\n    // case 'ADD_MESSAGE':\n    //   usersCopy = [...state.users]\n    //   userIndex = usersCopy.findIndex(u => u.username === username)\n    //   message.reactions = []\n    //   let newUser = {\n    //     ...usersCopy[userIndex],\n    //     messages: usersCopy[userIndex].messages\n    //       ? [message, ...usersCopy[userIndex].messages]\n    //       : null,\n    //     latestMessage: message\n    //   }\n    //   usersCopy[userIndex] = newUser\n    //   return {\n    //     ...state,\n    //     users: usersCopy\n    //   }\n  }\n};\n\nexport const MessageProvider = ({\n  children\n}) => {\n  _s();\n\n  const [state, dispatch] = useReducer(messageReducer, {\n    groups: null\n  });\n  return /*#__PURE__*/_jsxDEV(MessageDispatchContext.Provider, {\n    value: dispatch,\n    children: /*#__PURE__*/_jsxDEV(MessageStateContext.Provider, {\n      value: state,\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 5\n  }, this);\n};\n\n_s(MessageProvider, \"/jjA9M+XxEOL3xZPjbRpyObyWHU=\");\n\n_c = MessageProvider;\nexport const useMessageState = () => {\n  _s2();\n\n  return useContext(MessageStateContext);\n};\n\n_s2(useMessageState, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n\nexport const useMessageDispatch = () => {\n  _s3();\n\n  return useContext(MessageDispatchContext);\n};\n\n_s3(useMessageDispatch, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n\nvar _c;\n\n$RefreshReg$(_c, \"MessageProvider\");","map":{"version":3,"sources":["/Users/divyanshisaxena/Desktop/divyanshi/learning/gql/group-chat-app/client/src/context/message.js"],"names":["React","createContext","useContext","useReducer","MessageStateContext","MessageDispatchContext","messageReducer","state","action","groupsCopy","type","groups","payload","groupIndex","findIndex","group","groupname","messages","map","selected","MessageProvider","children","dispatch","useMessageState","useMessageDispatch"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAgBC,aAAhB,EAA+BC,UAA/B,EAA2CC,UAA3C,QAA6D,OAA7D;;AAEA,MAAMC,mBAAmB,gBAAGH,aAAa,EAAzC;AACA,MAAMI,sBAAsB,gBAAGJ,aAAa,EAA5C;;AAEA,MAAMK,cAAc,GAAG,CAACC,KAAD,EAAQC,MAAR,KAAmB;AACxC;AACA,MAAIC,UAAJ,CAFwC,CAGxC;;AACA,UAAQD,MAAM,CAACE,IAAf;AACE,SAAK,YAAL;AACE,aAAO,EACL,GAAGH,KADE;AAELI,QAAAA,MAAM,EAAEH,MAAM,CAACI;AAFV,OAAP;;AAIF,SAAK,oBAAL;AACEH,MAAAA,UAAU,GAAG,CAAC,GAAGF,KAAK,CAACI,MAAV,CAAb;AACAE,MAAAA,UAAU,GAAGJ,UAAU,CAACK,SAAX,CAAqBC,KAAK,IAAIA,KAAK,CAACC,SAAN,KAAoBA,SAAlD,CAAb;AACAP,MAAAA,UAAU,CAACI,UAAD,CAAV,GAAyB,EAAC,GAAGJ,UAAU,CAACI,UAAD,CAAd;AAA4BI,QAAAA;AAA5B,OAAzB;AACA,aAAO,EACL,GAAGV,KADE;AAELI,QAAAA,MAAM,EAAEF;AAFH,OAAP;;AAIF,SAAK,oBAAL;AACEA,MAAAA,UAAU,GAAGF,KAAK,CAACI,MAAN,CAAaO,GAAb,CAAiBH,KAAK,KAAK,EACtC,GAAGA,KADmC;AAEtCI,QAAAA,QAAQ,EAAEJ,KAAK,CAACC,SAAN,KAAoBR,MAAM,CAACI;AAFC,OAAL,CAAtB,CAAb;AAIA,aAAO,EACL,GAAGL,KADE;AAELI,QAAAA,MAAM,EAAEF;AAFH,OAAP;AAIF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAtCF;AAwCD,CA5CD;;AA6CA,OAAO,MAAMW,eAAe,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAkB;AAAA;;AAC/C,QAAM,CAACd,KAAD,EAAQe,QAAR,IAAoBnB,UAAU,CAACG,cAAD,EAAiB;AAAEK,IAAAA,MAAM,EAAE;AAAV,GAAjB,CAApC;AACA,sBACE,QAAC,sBAAD,CAAwB,QAAxB;AAAiC,IAAA,KAAK,EAAEW,QAAxC;AAAA,2BACE,QAAC,mBAAD,CAAqB,QAArB;AAA8B,MAAA,KAAK,EAAEf,KAArC;AAAA,gBACGc;AADH;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,UADF;AAOD,CATM;;GAAMD,e;;KAAAA,e;AAWb,OAAO,MAAMG,eAAe,GAAG;AAAA;;AAAA,SAAMrB,UAAU,CAACE,mBAAD,CAAhB;AAAA,CAAxB;;IAAMmB,e;;AACb,OAAO,MAAMC,kBAAkB,GAAG;AAAA;;AAAA,SAAMtB,UAAU,CAACG,sBAAD,CAAhB;AAAA,CAA3B;;IAAMmB,kB","sourcesContent":["import React, { createContext, useContext, useReducer } from 'react'\n\nconst MessageStateContext = createContext()\nconst MessageDispatchContext = createContext()\n\nconst messageReducer = (state, action) => {\n  // let usersCopy, userIndex\n  let groupsCopy\n  // const { username, message, messages } = action.payload\n  switch (action.type) {\n    case 'SET_GROUPS':\n      return {\n        ...state,\n        groups: action.payload\n      }\n    case 'SET_GROUP_MESSAGES':\n      groupsCopy = [...state.groups]\n      groupIndex = groupsCopy.findIndex(group => group.groupname === groupname)\n      groupsCopy[groupIndex] = {...groupsCopy[groupIndex], messages}\n      return {\n        ...state,\n        groups: groupsCopy\n      }\n    case 'SET_SELECTED_GROUP':\n      groupsCopy = state.groups.map(group => ({\n        ...group,\n        selected: group.groupname === action.payload\n      }))\n      return {\n        ...state,\n        groups: groupsCopy\n      }\n    // case 'ADD_MESSAGE':\n    //   usersCopy = [...state.users]\n    //   userIndex = usersCopy.findIndex(u => u.username === username)\n    //   message.reactions = []\n    //   let newUser = {\n    //     ...usersCopy[userIndex],\n    //     messages: usersCopy[userIndex].messages\n    //       ? [message, ...usersCopy[userIndex].messages]\n    //       : null,\n    //     latestMessage: message\n    //   }\n    //   usersCopy[userIndex] = newUser\n    //   return {\n    //     ...state,\n    //     users: usersCopy\n    //   }\n  }\n}\nexport const MessageProvider = ({ children }) => {\n  const [state, dispatch] = useReducer(messageReducer, { groups: null })\n  return (\n    <MessageDispatchContext.Provider value={dispatch}>\n      <MessageStateContext.Provider value={state}>\n        {children}\n      </MessageStateContext.Provider>\n    </MessageDispatchContext.Provider>\n  )\n}\n\nexport const useMessageState = () => useContext(MessageStateContext)\nexport const useMessageDispatch = () => useContext(MessageDispatchContext)"]},"metadata":{},"sourceType":"module"}