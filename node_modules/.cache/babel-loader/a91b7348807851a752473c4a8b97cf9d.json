{"ast":null,"code":"var _jsxFileName = \"/Users/divyanshisaxena/Desktop/divyanshi/learning/gql/group-chat-app/client/src/pages/Home.js\",\n    _s = $RefreshSig$();\n\nimport React, { Fragment, useState, useEffect } from 'react';\nimport { gql, useLazyQuery, useQuery } from '@apollo/client';\nimport { useAuthDispatch, useAuthState } from '../context/auth';\nimport { useMessageState, useMessageDispatch } from '../context/message';\nimport { Row, Col, Button, Card } from 'react-bootstrap';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst GET_GROUPS = gql`\n  query getGroups{\n    getGroups{\n      groupname groupdesc createdAt\n    }\n  }\n`;\nexport default function Home() {\n  _s();\n\n  var _groups$find;\n\n  const authDispatch = useAuthDispatch();\n  const {\n    user\n  } = useAuthState();\n  const dispatch = useMessageDispatch();\n  const {\n    groups\n  } = useMessageState();\n  const selectedGroup = groups === null || groups === void 0 ? void 0 : (_groups$find = groups.find(group => group.selected === true)) === null || _groups$find === void 0 ? void 0 : _groups$find.groupname; // const [groups, setGroups] = useState([])\n  // const [getGroups, { loading, data, error }] = useLazyQuery(GET_GROUPS)\n\n  const {\n    loading\n  } = useQuery(GET_GROUPS, {\n    onCompleted: data => dispatch({\n      type: 'SET_GROUPS',\n      payload: data.getGroups\n    }),\n    onError: err => console.log('error in query: ', err)\n  });\n  let groupsMarkup;\n\n  if (!groups || loading) {\n    groupsMarkup = /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"loading..\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 20\n    }, this);\n  } else if (groups.length === 0) {\n    groupsMarkup = /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"no groups created yet\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 20\n    }, this);\n  } else if (groups.length > 0) {\n    groupsMarkup = groups.map(group => {\n      // const selected = selectedGroup === group.groupname\n      return /*#__PURE__*/_jsxDEV(Card, {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(Card.Body, {\n          children: [/*#__PURE__*/_jsxDEV(Card.Title, {\n            children: group.groupname\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 41,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Card.Text, {\n            children: group.groupdesc\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 45,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"primary\",\n            onClick: () => dispatch({\n              type: 'SET_SELECTED_GROUP',\n              payload: group.groupname\n            }),\n            children: \"Enter group\"\n          }, group.groupname, false, {\n            fileName: _jsxFileName,\n            lineNumber: 49,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Card.Footer, {\n          className: \"text-muted\",\n          children: group.createdAt\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 9\n      }, this);\n    });\n  }\n\n  const logout = () => {\n    authDispatch({\n      type: 'LOGOUT'\n    });\n    window.location.href = '/login';\n  };\n\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Row, {\n      className: \"bg-white justify-content-end text-center mb-1\",\n      children: /*#__PURE__*/_jsxDEV(Col, {\n        sm: 2,\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"link\",\n          className: \"text-decoration-none\",\n          onClick: logout,\n          children: \"Logout\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Row, {\n      children: /*#__PURE__*/_jsxDEV(Col, {\n        sm: 6,\n        md: 4,\n        lg: 2,\n        children: groupsMarkup\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Home, \"7wgWitVFcR80kmjf/QSvxytQQoI=\", false, function () {\n  return [useAuthDispatch, useAuthState, useMessageDispatch, useMessageState, useQuery];\n});\n\n_c = Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"sources":["/Users/divyanshisaxena/Desktop/divyanshi/learning/gql/group-chat-app/client/src/pages/Home.js"],"names":["React","Fragment","useState","useEffect","gql","useLazyQuery","useQuery","useAuthDispatch","useAuthState","useMessageState","useMessageDispatch","Row","Col","Button","Card","GET_GROUPS","Home","authDispatch","user","dispatch","groups","selectedGroup","find","group","selected","groupname","loading","onCompleted","data","type","payload","getGroups","onError","err","console","log","groupsMarkup","length","map","groupdesc","createdAt","logout","window","location","href"],"mappings":"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","sourcesContent":["import React, { Fragment, useState, useEffect } from 'react'\nimport { gql, useLazyQuery, useQuery } from '@apollo/client'\nimport { useAuthDispatch, useAuthState } from '../context/auth'\nimport { useMessageState, useMessageDispatch } from '../context/message'\nimport { Row, Col, Button, Card } from 'react-bootstrap'\n\nconst GET_GROUPS = gql`\n  query getGroups{\n    getGroups{\n      groupname groupdesc createdAt\n    }\n  }\n`\nexport default function Home() {\n  const authDispatch = useAuthDispatch()\n  const { user } = useAuthState()\n  const dispatch = useMessageDispatch()\n  const { groups } = useMessageState()\n  const selectedGroup = groups?.find(group => group.selected === true)?.groupname\n\n  // const [groups, setGroups] = useState([])\n\n  // const [getGroups, { loading, data, error }] = useLazyQuery(GET_GROUPS)\n  const { loading } = useQuery(GET_GROUPS, {\n    onCompleted: (data) => dispatch({ type: 'SET_GROUPS', payload: data.getGroups }),\n    onError: (err) => console.log('error in query: ', err)\n  })\n\n  let groupsMarkup\n  if (!groups || loading) {\n    groupsMarkup = <p>loading..</p>\n  } else if (groups.length === 0) {\n    groupsMarkup = <p>no groups created yet</p>\n  } else if (groups.length > 0) {\n    groupsMarkup = groups.map(group => {\n      // const selected = selectedGroup === group.groupname\n      return (\n        <Card className=\"text-center\">\n          {/* <Card.Header>Featured</Card.Header> */}\n          <Card.Body>\n            <Card.Title>\n              {group.groupname}\n              {/* title */}\n            </Card.Title>\n            <Card.Text>\n              {group.groupdesc}\n              {/* text */}\n            </Card.Text>\n              <Button variant=\"primary\" key={group.groupname}\n                onClick={()=> dispatch({ type: 'SET_SELECTED_GROUP', payload: group.groupname})}>\n                Enter group\n              </Button>\n          </Card.Body>\n          <Card.Footer className=\"text-muted\">\n            {group.createdAt}\n            {/* footer */}\n          </Card.Footer>\n        </Card>\n      )\n    })\n  }\n\n  const logout = () => {\n    authDispatch({ type: 'LOGOUT' })\n    window.location.href = '/login'\n  }\n\n  return (\n    <Fragment>\n      <Row className=\"bg-white justify-content-end text-center mb-1\">\n        <Col sm={2}>\n            <Button variant=\"link\" className=\"text-decoration-none\" onClick={logout}>Logout</Button>\n        </Col>\n      </Row>\n\n      <Row>\n        {/* {groups.map(group => { */}\n        <Col sm={6} md={4} lg={2}>\n          {groupsMarkup}  \n        </Col>\n        {/* })} */}\n      </Row>\n    </Fragment>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}