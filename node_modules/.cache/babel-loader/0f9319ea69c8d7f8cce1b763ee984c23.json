{"ast":null,"code":"var _jsxFileName = \"/Users/divyanshisaxena/Desktop/divyanshi/learning/gql/group-chat-app/client/src/pages/Home.js\",\n    _s = $RefreshSig$();\n\nimport React, { Fragment, useState, useEffect } from 'react';\nimport { gql, useLazyQuery, useQuery } from '@apollo/client';\nimport { useAuthDispatch, useAuthState } from '../context/auth';\nimport { useMessageState, useMessageDispatch } from '../context/message';\nimport { Row, Col, Button, Card } from 'react-bootstrap';\nimport classNames from 'classnames';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst GET_GROUPS = gql`\n  query getGroups{\n    getGroups{\n      groupname groupdesc createdAt\n    }\n  }\n`;\nexport const Home = () => {\n  _s();\n\n  var _groups$find;\n\n  const authDispatch = useAuthDispatch();\n  const {\n    user\n  } = useAuthState();\n  const dispatch = useMessageDispatch();\n  const {\n    groups\n  } = useMessageState();\n  const selectedGroup = groups === null || groups === void 0 ? void 0 : (_groups$find = groups.find(group => group.selected === true)) === null || _groups$find === void 0 ? void 0 : _groups$find.groupname; // const [groups, setGroups] = useState([])\n  // const [getGroups, { loading, data, error }] = useLazyQuery(GET_GROUPS)\n\n  const {\n    loading\n  } = useQuery(GET_GROUPS, {\n    onCompleted: data => dispatch({\n      type: 'SET_GROUPS',\n      payload: data.getGroups\n    }),\n    onError: err => console.log('error in query: ', err)\n  });\n  let groupsMarkup;\n\n  if (!groups || loading) {\n    groupsMarkup = /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"loading..\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 20\n    }, this);\n  } else if (groups.length === 0) {\n    groupsMarkup = /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"no groups created yet\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 20\n    }, this);\n  } else if (groups.length > 0) {\n    groupsMarkup = groups.map(group => {\n      const selected = selectedGroup === group.groupname;\n      return /*#__PURE__*/_jsxDEV(Col, {\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          className: \"text-center\",\n          children: [/*#__PURE__*/_jsxDEV(Card.Body, {\n            children: [/*#__PURE__*/_jsxDEV(Card.Title, {\n              children: group.groupname\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 43,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(Card.Text, {\n              children: group.groupdesc\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 47,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"primary\",\n              className: classNames(\"mb-3\", {\n                'bg-warning': selected\n              }),\n              onClick: () => dispatch({\n                type: 'SET_SELECTED_GROUP',\n                payload: group.groupname\n              }),\n              children: \"Enter group\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 51,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 42,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Card.Footer, {\n            className: \"text-muted\",\n            children: group.createdAt\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 11\n          }, this)]\n        }, group.groupname, true, {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 9\n      }, this);\n    });\n  }\n\n  const logout = () => {\n    authDispatch({\n      type: 'LOGOUT'\n    });\n    window.location.href = '/login';\n  };\n\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Row, {\n      className: \"bg-white justify-content-end text-center mb-1\",\n      children: /*#__PURE__*/_jsxDEV(Col, {\n        sm: 2,\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"link\",\n          className: \"text-decoration-none\",\n          onClick: logout,\n          children: \"Logout\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Row, {\n      children: groupsMarkup\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Home, \"7wgWitVFcR80kmjf/QSvxytQQoI=\", false, function () {\n  return [useAuthDispatch, useAuthState, useMessageDispatch, useMessageState, useQuery];\n});\n\n_c = Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"sources":["/Users/divyanshisaxena/Desktop/divyanshi/learning/gql/group-chat-app/client/src/pages/Home.js"],"names":["React","Fragment","useState","useEffect","gql","useLazyQuery","useQuery","useAuthDispatch","useAuthState","useMessageState","useMessageDispatch","Row","Col","Button","Card","classNames","GET_GROUPS","Home","authDispatch","user","dispatch","groups","selectedGroup","find","group","selected","groupname","loading","onCompleted","data","type","payload","getGroups","onError","err","console","log","groupsMarkup","length","map","groupdesc","createdAt","logout","window","location","href"],"mappings":"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","sourcesContent":["import React, { Fragment, useState, useEffect } from 'react'\nimport { gql, useLazyQuery, useQuery } from '@apollo/client'\nimport { useAuthDispatch, useAuthState } from '../context/auth'\nimport { useMessageState, useMessageDispatch } from '../context/message'\nimport { Row, Col, Button, Card } from 'react-bootstrap'\nimport classNames from 'classnames'\n\nconst GET_GROUPS = gql`\n  query getGroups{\n    getGroups{\n      groupname groupdesc createdAt\n    }\n  }\n`\nexport const Home = () => {\n  const authDispatch = useAuthDispatch()\n  const { user } = useAuthState()\n  const dispatch = useMessageDispatch()\n  const { groups } = useMessageState()\n  const selectedGroup = groups?.find(group => group.selected === true)?.groupname\n\n  // const [groups, setGroups] = useState([])\n\n  // const [getGroups, { loading, data, error }] = useLazyQuery(GET_GROUPS)\n  const { loading } = useQuery(GET_GROUPS, {\n    onCompleted: (data) => dispatch({ type: 'SET_GROUPS', payload: data.getGroups }),\n    onError: (err) => console.log('error in query: ', err)\n  })\n\n  let groupsMarkup\n  if (!groups || loading) {\n    groupsMarkup = <p>loading..</p>\n  } else if (groups.length === 0) {\n    groupsMarkup = <p>no groups created yet</p>\n  } else if (groups.length > 0) {\n    groupsMarkup = groups.map(group => {\n      const selected = selectedGroup === group.groupname\n      return (\n        <Col>\n        <Card className=\"text-center\" key={group.groupname}>\n          {/* <Card.Header>Featured</Card.Header> */}\n          <Card.Body>\n            <Card.Title>\n              {group.groupname}\n              {/* title */}\n            </Card.Title>\n            <Card.Text>\n              {group.groupdesc}\n              {/* text */}\n            </Card.Text>\n            <Button variant=\"primary\"\n              className={classNames(\"mb-3\",{ 'bg-warning': selected })}\n                onClick={()=> dispatch({ type: 'SET_SELECTED_GROUP', payload: group.groupname})}>\n                Enter group\n              </Button>\n          </Card.Body>\n          <Card.Footer className=\"text-muted\">\n            {group.createdAt}\n            {/* footer */}\n          </Card.Footer>\n        </Card></Col>\n      )\n    })\n  }\n\n  const logout = () => {\n    authDispatch({ type: 'LOGOUT' })\n    window.location.href = '/login'\n  }\n\n  return (\n    <Fragment>\n      <Row className=\"bg-white justify-content-end text-center mb-1\">\n        <Col sm={2}>\n            <Button variant=\"link\" className=\"text-decoration-none\" onClick={logout}>Logout</Button>\n        </Col>\n      </Row>\n\n      <Row>\n        {/* {groups.map(group => { */}\n        {/* <Col> */}\n          {groupsMarkup}  \n        {/* </Col> */}\n        {/* })} */}\n      </Row>\n    </Fragment>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}