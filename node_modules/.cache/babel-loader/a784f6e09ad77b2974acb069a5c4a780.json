{"ast":null,"code":"import _objectSpread from\"/Users/divyanshisaxena/Desktop/divyanshi/learning/gql/group-chat-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/divyanshisaxena/Desktop/divyanshi/learning/gql/group-chat-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Users/divyanshisaxena/Desktop/divyanshi/learning/gql/group-chat-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject;import React,{useState}from'react';import{gql,useMutation}from'@apollo/client';import{Row,Col,Form,Button}from'react-bootstrap';import{Link}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var REGISTER_USER=gql(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  mutation register($username: String! $email: String! $password: String! $confirmPassword: String!){\\n    register(username: $username email: $email password: $password confirmPassword: $confirmPassword){\\n      username createdAt\\n    }\\n  }\\n\"])));export var Register=function Register(props){var _errors$email,_errors$username,_errors$password,_errors$confirmPasswo;var _useState=useState({username:'',email:'',password:'',confirmPassword:''}),_useState2=_slicedToArray(_useState,2),variables=_useState2[0],setVariables=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),errors=_useState4[0],setErrors=_useState4[1];var _useMutation=useMutation(REGISTER_USER,{// Redirect to login page when registered\nupdate:function update(cache,res){return props.history.push('/login');},// Handle error\nonError:function onError(err){// console.log('errors - seterrors : ', errors)\n// console.log('ERROR : ', error)\n// console.log('DATA : ', data)\n// console.log('onerror: ', err)\n// console.log('object: ', err.networkError.result.errors)\n// console.log('json: ', JSON.stringify(err))\n// console.log('err ', err)\nconsole.log('err: ',err.graphQLErrors[0].extensions.errors);setErrors(err.graphQLErrors[0].extensions.errors);}}),_useMutation2=_slicedToArray(_useMutation,2),registerUser=_useMutation2[0],_useMutation2$=_useMutation2[1],loading=_useMutation2$.loading,data=_useMutation2$.data,error=_useMutation2$.error;var submitRegistrationForm=function submitRegistrationForm(event){event.preventDefault();console.log('variables: ',variables);registerUser({variables:variables});};return/*#__PURE__*/_jsx(Row,{className:\"bg-white rounded-3 py-5 justify-content-center\",children:/*#__PURE__*/_jsxs(Col,{sm:8,md:6,lg:4,children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-center\",children:\"REGISTER\"}),/*#__PURE__*/_jsxs(Form,{onSubmit:submitRegistrationForm,children:[/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{className:errors.email&&'text-danger',children:(_errors$email=errors.email)!==null&&_errors$email!==void 0?_errors$email:'Email address'}),/*#__PURE__*/_jsx(Form.Control,{type:\"email\",value:variables.email,className:errors.email&&'is-invalid',onChange:function onChange(e){return setVariables(_objectSpread(_objectSpread({},variables),{},{email:e.target.value}));}})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{className:errors.username&&'text-danger',children:(_errors$username=errors.username)!==null&&_errors$username!==void 0?_errors$username:'Username'}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",value:variables.username,className:errors.username&&'is-invalid',onChange:function onChange(e){return setVariables(_objectSpread(_objectSpread({},variables),{},{username:e.target.value}));}})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{className:errors.password&&'text-danger',children:(_errors$password=errors.password)!==null&&_errors$password!==void 0?_errors$password:'Password'}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",value:variables.password,className:errors.password&&'is-invalid',onChange:function onChange(e){return setVariables(_objectSpread(_objectSpread({},variables),{},{password:e.target.value}));}})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{className:errors.confirmPassword&&'text-danger',children:(_errors$confirmPasswo=errors.confirmPassword)!==null&&_errors$confirmPasswo!==void 0?_errors$confirmPasswo:'Confirm Password'}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",value:variables.confirmPassword,className:errors.confirmPassword&&'is-invalid',onChange:function onChange(e){return setVariables(_objectSpread(_objectSpread({},variables),{},{confirmPassword:e.target.value}));}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(Button,{variant:\"success\",type:\"submit\",disabled:loading,children:loading?'loading..':'Register'}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"small\",{children:[\"Already have an account ? \",/*#__PURE__*/_jsx(Link,{to:\"/login\",children:\"Login\"})]})]})]})]})});};","map":{"version":3,"sources":["/Users/divyanshisaxena/Desktop/divyanshi/learning/gql/group-chat-app/client/src/pages/Register.js"],"names":["React","useState","gql","useMutation","Row","Col","Form","Button","Link","REGISTER_USER","Register","props","username","email","password","confirmPassword","variables","setVariables","errors","setErrors","update","cache","res","history","push","onError","err","console","log","graphQLErrors","extensions","registerUser","loading","data","error","submitRegistrationForm","event","preventDefault","e","target","value"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport { gql, useMutation } from '@apollo/client'\nimport { Row, Col, Form, Button } from 'react-bootstrap'\nimport { Link } from 'react-router-dom'\n\nconst REGISTER_USER = gql`\n  mutation register($username: String! $email: String! $password: String! $confirmPassword: String!){\n    register(username: $username email: $email password: $password confirmPassword: $confirmPassword){\n      username createdAt\n    }\n  }\n`;\nexport const Register = (props) => {\n\n  const [variables, setVariables] = useState({\n    username: '',\n    email: '',\n    password: '',\n    confirmPassword: ''\n  })\n\n  const [errors, setErrors] = useState({})\n\n  const [registerUser, { loading, data, error }] = useMutation(REGISTER_USER, {\n\n    // Redirect to login page when registered\n    update: (cache, res) => props.history.push('/login'),\n    // Handle error\n    onError: (err) => {\n      // console.log('errors - seterrors : ', errors)\n      // console.log('ERROR : ', error)\n      // console.log('DATA : ', data)\n      // console.log('onerror: ', err)\n      // console.log('object: ', err.networkError.result.errors)\n      // console.log('json: ', JSON.stringify(err))\n      // console.log('err ', err)\n      console.log('err: ', err.graphQLErrors[0].extensions.errors)\n      setErrors(err.graphQLErrors[0].extensions.errors)\n    }\n  })\n\n  const submitRegistrationForm = (event) => {\n    event.preventDefault()\n    console.log('variables: ', variables)\n    registerUser({ variables })\n  }\n\n  return (\n    <Row className=\"bg-white rounded-3 py-5 justify-content-center\">\n      <Col sm={8} md={6} lg={4}>\n        \n        {/* HEADING */}\n        <h1 className=\"text-center\">REGISTER</h1>\n\n        {/* FORM STARTS */}\n        <Form onSubmit={submitRegistrationForm}>\n          \n          <Form.Group className=\"mb-3\">\n            <Form.Label className={errors.email && 'text-danger'}>\n              {errors.email ?? 'Email address'}\n            </Form.Label>\n            <Form.Control type=\"email\"\n              value={variables.email} className={errors.email && 'is-invalid'}\n              onChange={e => setVariables({ ...variables, email: e.target.value })} />\n          </Form.Group>\n\n          <Form.Group className=\"mb-3\">\n            <Form.Label className={errors.username && 'text-danger'}>\n              {errors.username ?? 'Username'}\n            </Form.Label>\n            <Form.Control type=\"text\"\n              value={variables.username} className={errors.username && 'is-invalid'}\n              onChange={e => setVariables({ ...variables, username: e.target.value })} />\n          </Form.Group>\n\n          <Form.Group className=\"mb-3\">\n            <Form.Label className={errors.password && 'text-danger'}>\n              {errors.password ?? 'Password'}\n            </Form.Label>\n            <Form.Control type=\"password\"\n              value={variables.password} className={errors.password && 'is-invalid'}\n              onChange={e => setVariables({ ...variables, password: e.target.value })} />\n          </Form.Group>\n\n          <Form.Group className=\"mb-3\">\n            <Form.Label className={errors.confirmPassword && 'text-danger'}>\n              {errors.confirmPassword ?? 'Confirm Password'}\n            </Form.Label>\n            <Form.Control type=\"password\"\n              value={variables.confirmPassword} className={errors.confirmPassword && 'is-invalid'}\n              onChange={e => setVariables({ ...variables, confirmPassword: e.target.value })} />\n          </Form.Group>\n  \n          <div className=\"text-center\">\n            <Button variant=\"success\" type=\"submit\" disabled={loading}>\n              {loading ? 'loading..' : 'Register'}\n            </Button>\n            <br />\n            <small>Already have an account ? <Link to=\"/login\">Login</Link></small>\n          </div>\n\n        </Form>\n        {/* FORM ENDS */}\n\n      </Col>\n    </Row>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}